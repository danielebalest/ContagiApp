Index: app/src/main/java/com/example/contagiapp/ui/login/LoginActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.contagiapp.ui.login;\r\n\r\nimport android.app.Activity;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.Observer;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.annotation.StringRes;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.KeyEvent;\r\nimport android.view.View;\r\nimport android.view.inputmethod.EditorInfo;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.contagiapp.HomeFragment;\r\nimport com.example.contagiapp.MainActivity;\r\nimport com.example.contagiapp.R;\r\nimport com.example.contagiapp.registrazione.RegistrationActivity;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\npublic class LoginActivity extends AppCompatActivity {\r\n\r\n    private static final String TAG =\"LoginActivity\";\r\n    private LoginViewModel loginViewModel;\r\n    private TextInputEditText mailEditText;\r\n    private TextInputEditText passwordEditText;\r\n    private TextInputLayout mailTextLayout;\r\n    private TextInputLayout passwordTextLayout;\r\n    private FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        loginViewModel = new ViewModelProvider(this, new LoginViewModelFactory())\r\n                .get(LoginViewModel.class);\r\n\r\n        mailEditText = findViewById(R.id.mail);\r\n        passwordEditText = findViewById(R.id.password);\r\n        mailTextLayout = findViewById(R.id.textFieldMail);\r\n        passwordTextLayout = findViewById(R.id.textFieldPassword);\r\n\r\n\r\n        final Button loginButton = findViewById(R.id.login);\r\n        final Button createAccountButton = findViewById(R.id.createAccount);\r\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n\r\n\r\n\r\n\r\n\r\n        loginButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                if(controlloTextFieldVuoto(mailEditText, passwordEditText) == 0){\r\n                    mailTextLayout.setError(null);\r\n                    passwordTextLayout.setError(null);\r\n                    openMain();\r\n                }\r\n\r\n\r\n            }\r\n        });\r\n\r\n        createAccountButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openRegistration();\r\n            }\r\n        });\r\n    }\r\n\r\n    private int controlloTextFieldVuoto(TextInputEditText mailEditText, TextInputEditText passwordEditText){\r\n\r\n        if(isEmpty(mailEditText) == true && isEmpty(passwordEditText) == false ){\r\n            mailTextLayout.setError(\"Inserisci mail\");\r\n            passwordTextLayout.setError(null);\r\n            return 1;\r\n        }\r\n\r\n        if(isEmpty(passwordEditText) == true && isEmpty(mailEditText) == false){\r\n            passwordTextLayout.setError(\"Inserisci password\");\r\n            mailTextLayout.setError(null);\r\n            return 2;\r\n        }else\r\n            passwordTextLayout.setError(null);\r\n\r\n        if(isEmpty(mailEditText) && isEmpty(passwordEditText) == true){\r\n            mailTextLayout.setError(\"Inserisci mail\");\r\n            passwordTextLayout.setError(\"Inserisci password\");\r\n            return 3;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    private boolean isEmpty(TextInputEditText etText) {\r\n        if(etText.getText().toString().length() > 0)\r\n            return false;\r\n        return true;\r\n    }\r\n\r\n    private void updateUiWithUser(LoggedInUserView model) {\r\n        String welcome = getString(R.string.welcome) + model.getDisplayName();\r\n        // TODO : initiate successful logged in experience\r\n        Toast.makeText(getApplicationContext(), welcome, Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n    private void showLoginFailed(@StringRes Integer errorString) {\r\n        Toast.makeText(getApplicationContext(), errorString, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n\r\n    public void openMain(){\r\n        String username = mailEditText.getText().toString();\r\n        String password = passwordEditText.getText().toString();\r\n\r\n        System.out.println(\"username in input:\"+username);\r\n        System.out.println(\"password in input:\"+password);\r\n\r\n        db.collection(\"Utenti\").whereEqualTo(\"mail\", username).whereEqualTo(\"password\",password)\r\n                .get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onSuccess(QuerySnapshot querySnapshots) { System.out.println(querySnapshots.isEmpty());\r\n                if(querySnapshots.isEmpty()) {\r\n                    Toast.makeText(getApplicationContext(), \"Mail o password errati\", Toast.LENGTH_SHORT).show();\r\n                } else {\r\n                    Intent mainIntent = new Intent(LoginActivity.this, MainActivity.class);\r\n                    startActivity(mainIntent);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public void openRegistration(){\r\n        Intent signUpIntent = new Intent(this, RegistrationActivity.class);\r\n        startActivity(signUpIntent);\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/contagiapp/ui/login/LoginActivity.java	(revision 22474fb2f4de23c100ca009064ea1eb51285eea6)
+++ app/src/main/java/com/example/contagiapp/ui/login/LoginActivity.java	(date 1611943762600)
@@ -137,13 +137,11 @@
         String username = mailEditText.getText().toString();
         String password = passwordEditText.getText().toString();
 
-        System.out.println("username in input:"+username);
-        System.out.println("password in input:"+password);
 
         db.collection("Utenti").whereEqualTo("mail", username).whereEqualTo("password",password)
                 .get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {
             @Override
-            public void onSuccess(QuerySnapshot querySnapshots) { System.out.println(querySnapshots.isEmpty());
+            public void onSuccess(QuerySnapshot querySnapshots) {
                 if(querySnapshots.isEmpty()) {
                     Toast.makeText(getApplicationContext(), "Mail o password errati", Toast.LENGTH_SHORT).show();
                 } else {
