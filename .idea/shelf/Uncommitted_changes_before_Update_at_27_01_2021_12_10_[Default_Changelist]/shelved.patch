Index: app/src/main/res/layout/fragment_new_events.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:padding=\"20dp\"\r\n    app:layout_constraintBottom_toBottomOf=\"parent\"\r\n    app:layout_constraintStart_toStartOf=\"parent\"\r\n    tools:context=\".eventi.NewEventsFragment\">\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingBottom=\"20dp\"\r\n            android:text=\"Inserire dati dell'evento\"\r\n            android:textAppearance=\"@style/TextAppearance.AppCompat.Display1\"\r\n            android:fontFamily=\"sans-serif-black\"\r\n            android:textSize=\"26sp\"\r\n            android:textStyle=\"bold\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/textNameEvent\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Nome evento\"\r\n            android:inputType=\"textPersonName\"\r\n            android:textSize=\"24sp\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/editTextNumber\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Numero massimo di partecipanti\"\r\n            android:inputType=\"number\"\r\n            android:textSize=\"24sp\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/dataEvento\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"59dp\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Data Evento\"\r\n            android:textSize=\"24sp\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/editTextTextMultiLine\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"110dp\"\r\n            android:ems=\"10\"\r\n            android:gravity=\"start|top\"\r\n            android:hint=\"Descrizione evento\"\r\n            android:inputType=\"textMultiLine\"\r\n            android:textSize=\"24sp\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView8\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"  Nazione:\"\r\n            android:textSize=\"24sp\" />\r\n\r\n        <Spinner\r\n            android:id=\"@+id/spinnerNazioni\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"44dp\"\r\n            android:entries=\"@array/nazioni\" />\r\n\r\n        <EditText\r\n            android:id=\"@+id/editCittaResidenza\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"10\"\r\n            android:inputType=\"textPersonName\"\r\n            android:hint=\"Città di residenza\"\r\n            android:textSize=\"24sp\" />\r\n\r\n        <Button\r\n            android:id=\"@+id/buttonCreaEvento\"\r\n            android:layout_width=\"152dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginBottom=\"50dp\"\r\n            android:text=\"Crea\" />\r\n\r\n    </LinearLayout>\r\n</ScrollView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/fragment_new_events.xml	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
+++ app/src/main/res/layout/fragment_new_events.xml	(date 1611742603160)
@@ -75,14 +75,28 @@
             android:entries="@array/nazioni" />
 
         <EditText
-            android:id="@+id/editCittaResidenza"
+            android:id="@+id/editCittaEvento"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:ems="10"
+            android:hint="Città"
+            android:inputType="textPersonName"
+            android:textSize="24sp" />
+
+        <EditText
+            android:id="@+id/editLuogoEvento"
             android:layout_width="match_parent"
             android:layout_height="wrap_content"
             android:ems="10"
             android:inputType="textPersonName"
-            android:hint="Città di residenza"
+            android:hint="Luogo evento"
             android:textSize="24sp" />
 
+        <com.google.android.gms.maps.MapView
+            android:id="@+id/mapView"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content" />
+
         <Button
             android:id="@+id/buttonCreaEvento"
             android:layout_width="152dp"
Index: app/src/main/java/com/example/contagiapp/eventi/NewEventsFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.contagiapp.eventi;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.contagiapp.HomeFragment;\r\nimport com.example.contagiapp.MainActivity;\r\nimport com.example.contagiapp.NotifyFragment;\r\nimport com.example.contagiapp.R;\r\nimport com.example.contagiapp.data.amici.FriendsFragment;\r\nimport com.example.contagiapp.gruppi.GroupFragment;\r\nimport com.example.contagiapp.registrazione.RegistrationActivity;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class NewEventsFragment extends AppCompatActivity {\r\n\r\n    private static final String TAG = \"NewEventsFragment\";\r\n    private Button creaEvento;\r\n    private TextView dataEvento;\r\n    private DatePickerDialog.OnDateSetListener dataDellEvento;\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_new_events);\r\n\r\n        // collegamento button registrati con la mainActivity\r\n        creaEvento = (Button) findViewById(R.id.buttonCreaEvento);\r\n\r\n        creaEvento.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openMainActivity();\r\n            }\r\n        });\r\n\r\n        //Date Picker\r\n        dataEvento = (TextView) findViewById(R.id.dataEvento);\r\n        dataEvento.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(\r\n                        NewEventsFragment.this,\r\n                        android.R.style.Theme_Material_InputMethod,\r\n                        dataDellEvento,\r\n                        year, month, day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.LTGRAY));\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n        dataDellEvento = new DatePickerDialog.OnDateSetListener(){\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n\r\n                Log.d(TAG, \"onDateSet: date: \" + dayOfMonth + \"/\" + month + \"/\" + year);\r\n                String date = dayOfMonth + \"/\" + month+1 + \"/\" + year;\r\n                dataEvento.setText(date);\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    private void openMainActivity() {\r\n        Map<String, Object> evento = new HashMap<>();\r\n\r\n        TextView nome = (TextView) findViewById(R.id.textNameEvent);\r\n        evento.put(\"nome\", nome.getText().toString());\r\n\r\n        TextView numeroP = (TextView) findViewById(R.id.editTextNumber);\r\n        evento.put(\"num_partecipanti\", numeroP.getText().toString());\r\n\r\n        TextView data = (TextView) findViewById(R.id.dataEvento);\r\n        evento.put(\"data\", data.getText().toString());\r\n\r\n        TextView descrizione = (TextView) findViewById(R.id.editTextTextMultiLine);\r\n        evento.put(\"descrizione\", descrizione.getText().toString());\r\n\r\n        Spinner nazione = (Spinner) findViewById(R.id.spinnerNazioni);\r\n        evento.put(\"nazione\", nazione.getSelectedItem().toString());\r\n\r\n        TextView citta = (TextView) findViewById(R.id.editCittaResidenza);\r\n        evento.put(\"citta\", citta.getText().toString());\r\n\r\n        db.collection(\"Eventi\").add(evento);\r\n        Toast.makeText(this, \"Evento aggiunto\", Toast.LENGTH_SHORT).show();\r\n\r\n        //Tornare indietro\r\n        this.finish();\r\n\r\n    }\r\n};\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/contagiapp/eventi/NewEventsFragment.java	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
+++ app/src/main/java/com/example/contagiapp/eventi/NewEventsFragment.java	(date 1611742502311)
@@ -5,7 +5,6 @@
 import android.graphics.drawable.ColorDrawable;
 import android.os.Bundle;
 import android.util.Log;
-import android.view.MenuItem;
 import android.view.View;
 import android.widget.Button;
 import android.widget.DatePicker;
@@ -13,21 +12,10 @@
 import android.widget.TextView;
 import android.widget.Toast;
 
-import androidx.annotation.NonNull;
 import androidx.appcompat.app.AppCompatActivity;
-import androidx.fragment.app.Fragment;
 
-import com.example.contagiapp.HomeFragment;
-import com.example.contagiapp.MainActivity;
-import com.example.contagiapp.NotifyFragment;
 import com.example.contagiapp.R;
-import com.example.contagiapp.data.amici.FriendsFragment;
-import com.example.contagiapp.gruppi.GroupFragment;
-import com.example.contagiapp.registrazione.RegistrationActivity;
-import com.google.android.gms.tasks.OnSuccessListener;
-import com.google.android.material.bottomnavigation.BottomNavigationView;
 import com.google.firebase.firestore.FirebaseFirestore;
-import com.google.firebase.firestore.QuerySnapshot;
 
 import java.util.Calendar;
 import java.util.HashMap;
@@ -106,9 +94,12 @@
         Spinner nazione = (Spinner) findViewById(R.id.spinnerNazioni);
         evento.put("nazione", nazione.getSelectedItem().toString());
 
-        TextView citta = (TextView) findViewById(R.id.editCittaResidenza);
+        TextView citta = (TextView) findViewById(R.id.editCittaEvento);
         evento.put("citta", citta.getText().toString());
 
+        TextView luogo = (TextView) findViewById(R.id.editCittaEvento);
+        evento.put("luogo", luogo.getText().toString());
+
         db.collection("Eventi").add(evento);
         Toast.makeText(this, "Evento aggiunto", Toast.LENGTH_SHORT).show();
 
Index: app/src/main/java/com/example/contagiapp/registrazione/RegistrationActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.contagiapp.registrazione;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.contagiapp.MainActivity;\r\nimport com.example.contagiapp.R;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class RegistrationActivity extends AppCompatActivity implements AdapterView.OnItemSelectedListener {\r\n    private TextView dataNascita;\r\n    private Button signInButton;\r\n    private DatePickerDialog.OnDateSetListener dataDiNascita;\r\n    private static final String TAG = \"RegistrationActivity\";\r\n    // Access a Cloud Firestore instance from your Activity\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    private int anno = 0, mese = 0, giorno = 0;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_registration);\r\n\r\n\r\n        //Spinner per nazioni\r\n        Spinner spinnerNazioni = findViewById(R.id.spinnerNazioni);\r\n        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.nazioni, android.R.layout.simple_spinner_dropdown_item);\r\n        adapter.setDropDownViewResource(R.layout.support_simple_spinner_dropdown_item);\r\n        spinnerNazioni.setAdapter(adapter);\r\n        spinnerNazioni.setOnItemSelectedListener(this);\r\n\r\n\r\n        // collegamento button registrati con la mainActivity\r\n        signInButton = (Button) findViewById(R.id.registrati);\r\n        signInButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openMainActivity();\r\n            }\r\n        });\r\n\r\n        //Date Picker\r\n        dataNascita = (TextView) findViewById(R.id.dataNascita);\r\n        dataNascita.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(\r\n                        RegistrationActivity.this,\r\n                        android.R.style.Theme_Material_InputMethod,\r\n                        dataDiNascita,\r\n                        year, month, day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.LTGRAY));\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n        dataDiNascita = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n\r\n                Log.d(TAG, \"onDateSet: date: \" + dayOfMonth + \"/\" + month + \"/\" + year);\r\n                String date = dayOfMonth + \"/\" + month + 1 + \"/\" + year;\r\n                dataNascita.setText(date);\r\n            }\r\n        };\r\n    }\r\n\r\n    public void openMainActivity() {\r\n        // Create a new user with a first, middle, and last name\r\n        final Map<String, Object> user = new HashMap<>();\r\n\r\n        EditText name = (EditText) findViewById(R.id.editTextName);\r\n        String nome = name.getText().toString();\r\n        user.put(\"nome\", nome);\r\n\r\n        EditText surname = (EditText) findViewById(R.id.editTextSurname);\r\n        String cognome = surname.getText().toString();\r\n        user.put(\"cognome\", cognome);\r\n\r\n        RadioGroup radiogroup = (RadioGroup) findViewById(R.id.radiogroup);\r\n        int Idselezionato = radiogroup.getCheckedRadioButtonId();\r\n        RadioButton radiosex = (RadioButton) findViewById(Idselezionato);\r\n        user.put(\"genere\", radiosex.getText().toString());\r\n\r\n        TextView date = (TextView) findViewById(R.id.dataNascita);\r\n        final String appoggio = date.getText().toString();\r\n\r\n        Spinner nazione = (Spinner) findViewById(R.id.spinnerNazioni);\r\n        user.put(\"nazione\", nazione.getSelectedItem().toString());\r\n\r\n        Spinner regione = (Spinner) findViewById(R.id.spinnerRegione);\r\n        user.put(\"regione\", regione.getSelectedItem().toString());\r\n\r\n        Spinner provincia = (Spinner) findViewById(R.id.spinnerProvince);\r\n        user.put(\"province\", provincia.getSelectedItem().toString());\r\n\r\n        Spinner citta = (Spinner) findViewById(R.id.spinnerCitta);\r\n        user.put(\"citta\", citta.getSelectedItem().toString());\r\n\r\n        EditText telefono = (EditText) findViewById(R.id.editTextPhone);\r\n        user.put(\"telefono\", telefono.getText().toString());\r\n\r\n        EditText password = (EditText) findViewById(R.id.editTextTextPassword);\r\n        final String psw1 = password.getText().toString();\r\n\r\n        EditText password2 = (EditText) findViewById(R.id.editTextRepeatPassword);\r\n        final String psw2 = password2.getText().toString();\r\n\r\n        EditText mail = (EditText) findViewById(R.id.editTextTextEmailAddress);\r\n        final String email = mail.getText().toString();\r\n\r\n        db.collection(\"Utenti\").whereEqualTo(\"mail\", email).get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot querySnapshots) {\r\n                        mail_contr(querySnapshots.isEmpty(), user, email, psw1, psw2, appoggio);\r\n                        isValidEmail(email);\r\n                    }\r\n                });\r\n    }\r\n\r\n    private boolean isValidEmail(String email){\r\n        if(!email.isEmpty() && email.contains(\"@\") ){\r\n            return true;\r\n        }\r\n        Toast.makeText(this,\"Inserisci una mail valida\", Toast.LENGTH_SHORT).show();\r\n        System.out.println(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nla chiocciola stronzo\");\r\n        finish();\r\n        startActivity(getIntent());\r\n        return false;\r\n    }\r\n\r\n\r\n    private void controllodata(String appoggio,Map<String, Object> user1) {\r\n\r\n    }\r\n\r\n\r\n\r\n    //Spinner per nazioni\r\n    @Override\r\n    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {\r\n        String text = parent.getItemAtPosition(position).toString();\r\n        //Toast.makeText(parent.getContext(), text, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    //per spinner\r\n    @Override\r\n    public void onNothingSelected(AdapterView<?> parent) {\r\n\r\n    }\r\n\r\n    private void mail_contr(boolean cond, Map<String, Object> user1, String email, String psw1, String psw2,String appoggio) {\r\n        Calendar cal = Calendar.getInstance();\r\n        int l = appoggio.length();\r\n        boolean conddata= false;\r\n        switch (l) {\r\n            case 9:\r\n                anno = Integer.valueOf(appoggio.substring(l - 4, l));\r\n                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));\r\n                giorno = Integer.valueOf(appoggio.charAt(0)) - 48;\r\n                break;\r\n            case 10:\r\n                anno = Integer.valueOf(appoggio.substring(l - 4, l));\r\n                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));\r\n                giorno = Integer.valueOf(appoggio.substring(l - 10, l - 8));\r\n                break;\r\n        }\r\n        System.out.println(\"la lunghezza è:\"+l); //TODO controllare condizioni nell'if\r\n        System.out.println(\"questo è l'anno inserito:\"+anno);\r\n        System.out.println(\"questo è il mese inserito:\"+mese);\r\n        System.out.println(\"Questo è il giorno inserito:\"+giorno);\r\n        System.out.println(cal.get(Calendar.MONTH+1));\r\n        System.out.println(mese <= cal.get(Calendar.MONTH));\r\n        if (anno <= (cal.get(Calendar.YEAR) - 14)) {\r\n            if (mese <= cal.get(Calendar.MONTH+1)) {\r\n                if (giorno <= cal.get(Calendar.DAY_OF_MONTH))\r\n                    user1.put(\"dataNascita\", appoggio);\r\n                else conddata= true;\r\n            }else conddata= true;\r\n        }else conddata= true;\r\n\r\n        if(conddata)\r\n        {\r\n            Toast.makeText(this, \"bisogna avere almeno 14 anni per iscriversi\", Toast.LENGTH_SHORT).show();\r\n            System.out.println(\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nCAZOOOOOOOOOO\");\r\n            finish();\r\n            startActivity(getIntent());\r\n        } else {\r\n            if (!(psw1.equals(psw2))) {\r\n                Toast.makeText(this, \"Le password coincidono\", Toast.LENGTH_SHORT).show();\r\n                finish();\r\n                startActivity(getIntent());\r\n            } else {\r\n                if (cond) {\r\n                    user1.put(\"password\", psw1);\r\n                    user1.put(\"mail\", email);\r\n                    db.collection(\"Utenti\").add(user1);\r\n                    Intent mainIntent = new Intent(this, MainActivity.class);\r\n                    startActivity(mainIntent);\r\n                } else {\r\n                    Toast.makeText(this, \"Mail già esistente\", Toast.LENGTH_SHORT).show();\r\n                    finish();\r\n                    startActivity(getIntent());\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/contagiapp/registrazione/RegistrationActivity.java	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
+++ app/src/main/java/com/example/contagiapp/registrazione/RegistrationActivity.java	(date 1611745796693)
@@ -85,9 +85,9 @@
         dataDiNascita = new DatePickerDialog.OnDateSetListener() {
             @Override
             public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {
-
+                month++;
                 Log.d(TAG, "onDateSet: date: " + dayOfMonth + "/" + month + "/" + year);
-                String date = dayOfMonth + "/" + month + 1 + "/" + year;
+                String date = dayOfMonth + "/" + month + "/" + year;
                 dataNascita.setText(date);
             }
         };
@@ -142,12 +142,12 @@
                     @Override
                     public void onSuccess(QuerySnapshot querySnapshots) {
                         mail_contr(querySnapshots.isEmpty(), user, email, psw1, psw2, appoggio);
-                        isValidEmail(email);
+                        //isValidEmail(email);
                     }
                 });
     }
 
-    private boolean isValidEmail(String email){
+    /*private boolean isValidEmail(String email){
         if(!email.isEmpty() && email.contains("@") ){
             return true;
         }
@@ -156,14 +156,7 @@
         finish();
         startActivity(getIntent());
         return false;
-    }
-
-
-    private void controllodata(String appoggio,Map<String, Object> user1) {
-
-    }
-
-
+    }*/
 
     //Spinner per nazioni
     @Override
@@ -183,10 +176,21 @@
         int l = appoggio.length();
         boolean conddata= false;
         switch (l) {
+            case 8:
+                anno = Integer.valueOf(appoggio.substring(l - 4, l));
+                mese = Integer.valueOf(appoggio.charAt(2)) - 48;
+                giorno = Integer.valueOf(appoggio.charAt(0)) - 48;
+                break;
             case 9:
-                anno = Integer.valueOf(appoggio.substring(l - 4, l));
-                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));
-                giorno = Integer.valueOf(appoggio.charAt(0)) - 48;
+                try {//giorno un valore
+                    anno = Integer.valueOf(appoggio.substring(l - 4, l));
+                    mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));
+                    giorno = Integer.valueOf(appoggio.charAt(0)) - 48;
+                } catch (Exception e) {//mese un valore
+                    anno = Integer.valueOf(appoggio.substring(l - 4, l));
+                    mese = Integer.valueOf(appoggio.charAt(3)) - 48;
+                    giorno = Integer.valueOf(appoggio.substring(0, 1));
+                }
                 break;
             case 10:
                 anno = Integer.valueOf(appoggio.substring(l - 4, l));
@@ -200,14 +204,35 @@
         System.out.println("Questo è il giorno inserito:"+giorno);
         System.out.println(cal.get(Calendar.MONTH+1));
         System.out.println(mese <= cal.get(Calendar.MONTH));
-        if (anno <= (cal.get(Calendar.YEAR) - 14)) {
-            if (mese <= cal.get(Calendar.MONTH+1)) {
+
+
+        if (anno < (cal.get(Calendar.YEAR) - 14)) {
+            user1.put("dataNascita", appoggio);
+        } else {
+            if (anno == (cal.get(Calendar.YEAR) - 14)) {
+
+            }
+        }
+            if (mese <= cal.get(Calendar.MONTH)) {
                 if (giorno <= cal.get(Calendar.DAY_OF_MONTH))
                     user1.put("dataNascita", appoggio);
                 else conddata= true;
             }else conddata= true;
         }else conddata= true;
 
+
+        /*
+        anno < 2007
+T= inserire data
+F= anno == 2007
+   T= mese < MESECORRENTE
+      T= inserire data
+      F= mese == MESECORRENTE
+         T= giorno <= GIORNOCORRENTE
+            T= inserire data
+            F= non inserire data
+         F= non inserire data
+         */
         if(conddata)
         {
             Toast.makeText(this, "bisogna avere almeno 14 anni per iscriversi", Toast.LENGTH_SHORT).show();
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47_[Default_Changelist]/shelved.patch	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47_[Default_Changelist]/shelved.patch	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
@@ -1,57 +0,0 @@
-Index: app/src/main/res/layout/activity_registration.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".registrazione.RegistrationActivity\">\r\n\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputLayout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"122dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/name\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Nome\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputLayout3\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"16dp\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textInputLayout2\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/surname\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:hint=\"Cognome\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n\r\n        <EditText\r\n            android:id=\"@+id/editDateofBirth\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"98dp\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Data di Nascita\"\r\n            android:inputType=\"date\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/textInputLayout3\" />\r\n\r\n        <Spinner\r\n            android:id=\"@+id/spinnerNazioni\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:spinnerMode=\"dropdown\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/editDateofBirth\"\r\n            />\r\n\r\n        <EditText\r\n            android:id=\"@+id/editTextNumber\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"49dp\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Cellulare\"\r\n            android:inputType=\"number\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toBottomOf=\"@+id/spinnerNazioni\" />\r\n\r\n\r\n    <RadioGroup\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"15dp\"\r\n        android:layout_marginTop=\"298dp\"\r\n        android:layout_marginEnd=\"396dp\"\r\n        android:layout_marginBottom=\"305dp\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" >\r\n\r\n            <RadioButton\r\n                android:id=\"@+id/Men\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"M\">\r\n                </RadioButton>\r\n            <RadioButton\r\n                android:id=\"@+id/Women\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"F\">\r\n        </RadioButton>\r\n\r\n\r\n\r\n        </RadioGroup>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_registration.xml	(revision 6ad2ec077b1e68f8591147f70eb50d77a6198c59)
-+++ app/src/main/res/layout/activity_registration.xml	(date 1610903499095)
-@@ -80,31 +80,29 @@
- 
-     <RadioGroup
-         android:layout_width="wrap_content"
--        android:layout_height="wrap_content"
-+        android:layout_height="64dp"
-         android:layout_marginStart="15dp"
--        android:layout_marginTop="298dp"
-+        android:layout_marginTop="285dp"
-         android:layout_marginEnd="396dp"
-         android:layout_marginBottom="305dp"
-         app:layout_constraintBottom_toBottomOf="parent"
-         app:layout_constraintEnd_toEndOf="parent"
-         app:layout_constraintStart_toStartOf="parent"
--        app:layout_constraintTop_toTopOf="parent" >
-+        app:layout_constraintTop_toTopOf="parent">
- 
--            <RadioButton
--                android:id="@+id/Men"
--                android:layout_width="wrap_content"
--                android:layout_height="wrap_content"
--                android:text="M">
--                </RadioButton>
--            <RadioButton
--                android:id="@+id/Women"
--                android:layout_width="wrap_content"
--                android:layout_height="wrap_content"
--                android:text="F">
--        </RadioButton>
--
-+        <RadioButton
-+            android:id="@+id/Men"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="M"></RadioButton>
-+
-+        <RadioButton
-+            android:id="@+id/Women"
-+            android:layout_width="wrap_content"
-+            android:layout_height="wrap_content"
-+            android:text="F"></RadioButton>
- 
- 
--        </RadioGroup>
-+    </RadioGroup>
- 
- </androidx.constraintlayout.widget.ConstraintLayout>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47__Default_Changelist_.xml	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47__Default_Changelist_.xml	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_19_01_2021_20_47_[Default_Changelist]" date="1611085647641" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_19_01_2021_20_47_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 19/01/2021 20:47 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: app/src/main/res/layout/activity_profilo_evento.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_profilo_evento.xml	(date 1611742502285)
+++ app/src/main/res/layout/activity_profilo_evento.xml	(date 1611742502285)
@@ -0,0 +1,57 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout
+    xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent"
+    android:layout_height="match_parent">
+
+    <ScrollView
+        android:layout_width="match_parent"
+        android:layout_height="match_parent">
+
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:orientation="vertical" />
+    </ScrollView>
+
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:orientation="vertical">
+
+        <TextView
+            android:id="@+id/nome_evento"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:text="TextView" />
+
+        <TextView
+            android:id="@+id/num_max_partecipanti"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:text="TextView" />
+
+        <TextView
+            android:id="@+id/data_evento"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:text="TextView" />
+
+        <TextView
+            android:id="@+id/nazione_evento"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:text="TextView" />
+
+        <TextView
+            android:id="@+id/citta_evento"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:text="TextView" />
+
+        <TextView
+            android:id="@+id/luogo_evento"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:text="TextView" />
+    </LinearLayout>
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/contagiapp/eventi/ProfiloEventoActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/contagiapp/eventi/ProfiloEventoActivity.java	(date 1611742070915)
+++ app/src/main/java/com/example/contagiapp/eventi/ProfiloEventoActivity.java	(date 1611742070915)
@@ -0,0 +1,4 @@
+package com.example.contagiapp.eventi;
+
+public class ProfiloEventoActivity {
+}
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.google.gms.google-services'\r\n\r\nandroid {\r\n    compileSdkVersion 29\r\n    buildToolsVersion \"30.0.2\"\r\n\r\n    defaultConfig {\r\n        applicationId \"com.example.contagiapp\"\r\n        minSdkVersion 21\r\n        targetSdkVersion 29\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\r\n        }\r\n    }\r\n\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\r\n\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    implementation 'androidx.annotation:annotation:1.1.0'\r\n    implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'\r\n    implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.2.0'\r\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.2.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n\r\n    implementation platform('com.google.firebase:firebase-bom:26.3.0')\r\n    implementation 'com.google.firebase:firebase-analytics'\r\n    implementation 'com.google.firebase:firebase-firestore:17.0.4'\r\n    implementation 'com.google.firebase:firebase-core:16.0.1'\r\n\r\n    implementation 'com.google.android.material:material:1.2.0'\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision 2e56c0130fe1586fcee89bc7d00249f82c8839e5)
+++ app/build.gradle	(date 1611742502185)
@@ -34,6 +34,7 @@
     implementation 'androidx.lifecycle:lifecycle-extensions:2.2.0'
     implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.2.0'
     implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.2.0'
+    implementation 'com.google.android.gms:play-services-maps:17.0.0'
     testImplementation 'junit:junit:4.12'
     androidTestImplementation 'androidx.test.ext:junit:1.1.2'
     androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
diff --git .idea/shelf/Uncommitted_changes_before_Reset_at_21_01_2021_18_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Reset_at_21_01_2021_18_33__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_22_01_2021_18_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_22_01_2021_18_33__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_16_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_16_53__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_13_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_13_15__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_12_34__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_12_34__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_14_01_2021_20_23__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_14_01_2021_20_23__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_17_20__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_17_20__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_48__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_48__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_16_33__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_16_33__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_48__controllo_sulle_psw_ora_funzia_pure.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_48__controllo_sulle_psw_ora_funzia_pure.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_10_31__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_10_31__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_11_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_11_24__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_44__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_44__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_rebase__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_19_06__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_19_06__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_11_20__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_11_20__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_59__ciao_.xml .idea/shelf/Uncommitted_changes_before_Update_at_21_01_2021_18_59__ciao_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_10_24__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_10_24__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_18_04__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_24_01_2021_18_04__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_19_20__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_20_01_2021_19_20__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_22_01_2021_18_06__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_22_01_2021_18_06__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_22_01_2021_17_38__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_22_01_2021_17_38__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_39__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_12_39__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_23_48__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_23_01_2021_23_48__Default_Changelist_.xml
