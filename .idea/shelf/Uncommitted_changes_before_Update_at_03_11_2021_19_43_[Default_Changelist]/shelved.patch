Index: app/src/main/java/com/batsoftware/contagiapp/eventi/NewEventsActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.batsoftware.contagiapp.eventi;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.app.TimePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.PersistableBundle;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.AutoCompleteTextView;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextClock;\r\nimport android.widget.TextView;\r\nimport android.widget.TimePicker;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.NavUtils;\r\nimport com.batsoftware.contagiapp.R;\r\nimport com.batsoftware.contagiapp.utente.Utente;\r\nimport com.google.android.gms.maps.MapView;\r\nimport com.google.android.gms.tasks.OnCanceledListener;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.firestore.CollectionReference;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.google.gson.Gson;\r\nimport com.squareup.picasso.Picasso;\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport dizionarioPerCitta.Cities;\r\nimport dizionarioPerCitta.Province;\r\nimport dizionarioPerCitta.Regions;\r\nimport es.dmoral.toasty.Toasty;\r\n\r\n\r\npublic class NewEventsActivity extends AppCompatActivity {\r\n\r\n    MapView mapView;\r\n    EditText editTextIndirizzo;\r\n\r\n    StorageReference storageRef = FirebaseStorage.getInstance().getReference();\r\n    private static final String TAG = \"NewEventsFragment\";\r\n\r\n    private Button creaEvento;\r\n    private TextView dataEvento;\r\n    private TextClock orarioEvento;\r\n    private DatePickerDialog.OnDateSetListener dataDellEvento;\r\n    private TimePickerDialog.OnTimeSetListener orarioDellEvento;\r\n\r\n    private String idEvento;\r\n    private boolean cond;\r\n    private Evento evento = new Evento();\r\n\r\n    private EditText nome;\r\n    private EditText descrizione;\r\n    private EditText numeroMaxP;\r\n    private TextInputEditText data;\r\n    private TextClock orario;\r\n    private EditText indirizzo;\r\n\r\n    private AutoCompleteTextView autoCompleteRegion;\r\n    private AutoCompleteTextView autoCompleteProvincia;\r\n    private AutoCompleteTextView autoCompleteCity;\r\n    private TextInputLayout layoutRegion;\r\n    private TextInputLayout layoutProvince;\r\n    private TextInputLayout layoutCity;\r\n\r\n    String regioneSelezionata = null;\r\n    String provinciaSelezionata = null;\r\n    String cittaSelezionata = null;\r\n    ArrayAdapter<String> adapterProvincia = null;\r\n    ArrayAdapter<String> adapterCitta = null;\r\n\r\n    public static final int PICK_IMAGE = 1;\r\n    private Uri imageUri;\r\n    private final static String storageDirectory = \"eventi\";\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    private CollectionReference eventiCollection = db.collection(\"Eventi\");\r\n    String documentId = null;\r\n\r\n    @Override\r\n    protected void onCreate(final Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.fragment_new_events);\r\n\r\n        nome = findViewById(R.id.editTextNomeEvento);\r\n        descrizione = findViewById(R.id.editTextDescrEvento);\r\n        numeroMaxP = findViewById(R.id.editTextNumMaxPartecipanti);\r\n        data = findViewById(R.id.dataEvento);\r\n        orario= findViewById(R.id.orarioEvento);\r\n        indirizzo = findViewById(R.id.editTextIndirizzo);\r\n\r\n        autoCompleteRegion = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextRegioneEvento);\r\n        autoCompleteProvincia = findViewById(R.id.autoCompleteTextProvinciaEvento);\r\n        autoCompleteCity = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextCittaEvento);\r\n        layoutRegion = findViewById(R.id.textInputRegioneEventoLayout);\r\n        layoutProvince = findViewById(R.id.textInputProvinciaEventoLayout);\r\n        layoutCity = findViewById(R.id.textInputCittaLayoutEvento);\r\n\r\n\r\n        Bundle bundle = getIntent().getExtras();\r\n        cond = bundle.getBoolean(\"scelta\");\r\n        if(cond) {\r\n\r\n            idEvento = bundle.getString(\"idEvento\");\r\n            final ImageView img = findViewById(R.id.imgProfiloEvento);\r\n\r\n            db.collection(\"Eventi\")\r\n                    .document(idEvento)\r\n                    .get()\r\n                    .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                            evento = documentSnapshot.toObject(Evento.class);\r\n\r\n                            nome.setText(evento.getNome());\r\n                            descrizione.setText(evento.getDescrizione());\r\n                            numeroMaxP.setText(Integer.toString(evento.getNumeroMaxPartecipanti()));\r\n                            autoCompleteRegion.setText(evento.getRegione());\r\n                            autoCompleteProvincia.setText(evento.getProvincia());\r\n                            autoCompleteCity.setText(evento.getCitta());\r\n                            indirizzo.setText(evento.getIndirizzo());\r\n                            data.setText(evento.getData());\r\n                            orario.setText(evento.getOrario());\r\n\r\n                            creaEvento.setText(\"Modifica Evento\");\r\n\r\n                            //recupero l'immagine dallo storage\r\n                            //TODO caricare l'immgaine precedente\r\n                            /*Log.d(\"eventi/idEvento\",\"eventi/\"+idEvento);\r\n                            storageRef.child(\"eventi/\"+idEvento).getDownloadUrl()\r\n                                    .addOnSuccessListener( new OnSuccessListener<Uri>() {\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n                                            String sUrl = uri.toString(); //otteniamo il token del'immagine\r\n                                            Log.d(\"OnSuccess\", \"\");\r\n                                            Log.d(\"sUrl\", sUrl);\r\n                                            Picasso.get().load(sUrl).into(img);\r\n                                        }})\r\n                                    .addOnFailureListener(new OnFailureListener() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Exception e) {\r\n                                            Log.d(\"OnFailure Exception\", String.valueOf(e));\r\n                                        }\r\n                                    });*/\r\n                        }\r\n                    });\r\n        }\r\n\r\n//TODO controllare se la modifica evento funziona e se la chiamata di\r\n// questa pagina funziona senza problemi sia da \"profiloEventoAdminFragment\"\r\n// che da \"EventsFragment\" e perchè torna indietro in ProfiloEventoFragment anzichè EventsFragment\r\n// aggiustare i controlli per data e orario e capire perchè quando apro il calendario anzichè 12 mi esce 1\r\n\r\n        ArrayAdapter<String> adapterRegione = new ArrayAdapter<String>(this,\r\n                android.R.layout.simple_dropdown_item_1line, Regions.all_regions);\r\n\r\n\r\n        autoCompleteRegion.setAdapter(adapterRegione);\r\n        layoutProvince.setEnabled(false);\r\n        layoutCity.setEnabled(false);\r\n\r\n\r\n        autoCompleteRegion.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                Log.d(\"Regione selezionata\", autoCompleteRegion.getText().toString());\r\n                regioneSelezionata = autoCompleteRegion.getText().toString();\r\n                layoutProvince.setEnabled(true);\r\n                adapterProvincia = new ArrayAdapter<String>(NewEventsActivity.this,\r\n                        android.R.layout.simple_dropdown_item_1line,\r\n                        Province.map.get(autoCompleteRegion.getText().toString()));\r\n                autoCompleteProvincia.setAdapter(adapterProvincia);\r\n\r\n                autoCompleteProvincia.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                    @Override\r\n                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                        Log.d(\"Provincia selezionata\", autoCompleteProvincia.getText().toString());\r\n                        provinciaSelezionata = autoCompleteProvincia.getText().toString();\r\n                        layoutCity.setEnabled(true);\r\n                        adapterCitta = new ArrayAdapter<String>(NewEventsActivity.this,\r\n                                android.R.layout.simple_dropdown_item_1line,\r\n                                Cities.mapPerProvincia.get(autoCompleteProvincia.getText().toString()));\r\n\r\n                        autoCompleteCity.setAdapter(adapterCitta);\r\n\r\n                        autoCompleteCity.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                            @Override\r\n                            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                                Log.d(\"Citta selezionata\", autoCompleteCity.getText().toString());\r\n                                cittaSelezionata = autoCompleteCity.getText().toString();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n        autoCompleteProvincia.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                Log.d(\"provincia\", String.valueOf(provinciaSelezionata));\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                Log.d(\"provincia\", String.valueOf(provinciaSelezionata));\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n        autoCompleteRegion.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                Log.d(\"regione\", String.valueOf(regioneSelezionata));\r\n                layoutProvince.setEnabled(false);\r\n                autoCompleteProvincia.setText(null);\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                Log.d(\"regione\", String.valueOf(regioneSelezionata));\r\n                layoutProvince.setEnabled(false);\r\n                autoCompleteProvincia.setText(null);\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n        editTextIndirizzo = findViewById(R.id.editTextIndirizzo);\r\n\r\n\r\n        /*mapView = findViewById(R.id.map_view);\r\n        mapView.onCreate(savedInstanceState);\r\n        mapView.getMapAsync(this);*/\r\n\r\n\r\n        // collegamento button registrati con la mainActivity\r\n        creaEvento = (Button) findViewById(R.id.buttonCreaEvento);\r\n\r\n        creaEvento.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                //openMainActivity();\r\n                addEventToDb();\r\n            }\r\n        });\r\n\r\n        //Date Picker\r\n        orarioEvento=(TextClock) findViewById(R.id.orarioEvento);\r\n        orarioEvento.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n\r\n                int hour;\r\n                int minute;\r\n                if(cond) {\r\n                    String ora = evento.getOrario();\r\n                    hour = Integer.parseInt(ora.substring(0,2));\r\n                    minute = Integer.parseInt(ora.substring(3,5));\r\n                } else {\r\n                    hour = cal.get(Calendar.HOUR);\r\n                    minute = cal.get(Calendar.MINUTE);\r\n                }\r\n\r\n                TimePickerDialog dialog;\r\n                dialog = new TimePickerDialog(NewEventsActivity.this, android.R.style.Theme_Material_InputMethod, orarioDellEvento,hour,minute,true);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.LTGRAY));\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n        dataEvento = (TextView) findViewById(R.id.dataEvento);\r\n        dataEvento.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year;\r\n                int month;\r\n                int day;\r\n\r\n                if(cond) {\r\n                    String data = evento.getData();\r\n                    day = Integer.parseInt(data.substring(0,2));\r\n                    month = Integer.parseInt(data.substring(3,5));\r\n                    year = Integer.parseInt(data.substring(6,10)) - 1;\r\n                } else {\r\n                    year = cal.get(Calendar.YEAR);\r\n                    month = cal.get(Calendar.MONTH);\r\n                    day = cal.get(Calendar.DAY_OF_MONTH);\r\n                }\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(\r\n                        NewEventsActivity.this,\r\n                        android.R.style.Theme_Material_InputMethod,\r\n                        dataDellEvento,\r\n                        year, month, day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.LTGRAY));\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n\r\n\r\n        dataDellEvento = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                month++;\r\n                String date = null;\r\n                Log.d(TAG, \"onDateSet: date: \" + dayOfMonth + \"/\" + month + \"/\" + year);\r\n                if(month<=9) {\r\n                    date = dayOfMonth + \"/0\" + month + \"/\" + year;\r\n                }else\r\n                    date = dayOfMonth + \"/\" + month + \"/\" + year;\r\n\r\n                dataEvento.setText(date);\r\n            }\r\n        };\r\n        //orario visualizzato come cristo comanda\r\n\r\n        orarioDellEvento = new TimePickerDialog.OnTimeSetListener() {\r\n            @Override\r\n            public void onTimeSet(TimePicker view, int hour, int minute) {\r\n                boolean condorario= false;\r\n                boolean condminuto= false;\r\n\r\n                if(hour<=9){\r\n                    condorario=true;\r\n                }\r\n                if(minute<=9){\r\n                    condminuto=true;\r\n                }\r\n\r\n                String time=null;\r\n                Log.d(TAG,\"onTimeSet: time: \" +hour + \":\" + minute);\r\n                if(condorario && condminuto){\r\n                    time= \"0\" + hour + \":0\" + minute;\r\n                }else if (condorario){\r\n                    time= \"0\"+ hour + \":\" + minute;\r\n                }else if(condminuto){\r\n                    time= + hour + \":0\" + minute;\r\n                }else time= + hour + \":\" + minute;\r\n\r\n                orarioEvento.setText(time);\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n    private void addEventToDb(){\r\n\r\n        if(controlloEditText(nome.getText().toString(), numeroMaxP.getText().toString(), descrizione.getText().toString(), cittaSelezionata, indirizzo.getText().toString())){\r\n            String mail = getMailUtenteLoggato();\r\n            evento.setAdmin(mail);\r\n            evento.setNome(nome.getText().toString());\r\n            evento.setDescrizione(descrizione.getText().toString());\r\n            evento.setNumeroMaxPartecipanti(Integer.parseInt(numeroMaxP.getText().toString()));\r\n            evento.setData(data.getText().toString()); //da vedere controllo\r\n            evento.setOrario(orario.getText().toString());\r\n            evento.setRegione(regioneSelezionata);\r\n            evento.setProvincia(provinciaSelezionata);\r\n            evento.setCitta(cittaSelezionata);\r\n            evento.setIndirizzo(indirizzo.getText().toString());\r\n            evento.setStatoRosso(false);\r\n\r\n            ArrayList<String> partecipanti = new ArrayList<String>(); //inizializzo un array vuoto\r\n            evento.setPartecipanti(partecipanti);\r\n\r\n\r\n            Log.d(\"getIndirizzo\", String.valueOf(evento.getIndirizzo()));\r\n            Log.d(\"getData\", String.valueOf(evento.getData()));\r\n            Log.d(\"getOrario\", String.valueOf(evento.getOrario()));\r\n\r\n\r\n            if(dataOraValide(evento)){\r\n\r\n                final Intent parentIntent = NavUtils.getParentActivityIntent(this);\r\n\r\n                db.collection(\"Eventi\").add(evento).addOnSuccessListener(new OnSuccessListener<DocumentReference>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentReference documentReference) {\r\n                        documentId = documentReference.getId();\r\n                        evento.setIdEvento(documentId);\r\n                        db.collection(\"Eventi\").document(documentId).update(\"idEvento\", documentId);\r\n                        uploadImage();\r\n\r\n                        if(cond) {\r\n                            db.collection(\"Eventi\").document(idEvento).delete();\r\n                            //db.collection(\"Eventi\").document(idEvento).update(evento);\r\n\r\n                            Toast.makeText(NewEventsActivity.this, \"Evento modificato\", Toast.LENGTH_SHORT).show();\r\n\r\n                            /*ProfiloEventoAdminFragment eventoAdmin = new ProfiloEventoAdminFragment();\r\n\r\n                            Bundle bun = new Bundle();\r\n                            bun.putString(\"idEvento\", documentId);\r\n\r\n                            eventoAdmin.setArguments(bun);\r\n                            FragmentTransaction fr = getSupportFragmentManager().beginTransaction();\r\n                            fr.replace(R.id.new_event,eventoAdmin);\r\n                            fr.addToBackStack(null); //serve per tornare al fragment precedente\r\n                            fr.commit();*/\r\n\r\n//TODO il problema è quando si va da questa activity a profiloEventoAdminFragment\r\n                            finish();\r\n                        } else {\r\n                            Toast.makeText(NewEventsActivity.this, \"Evento aggiunto\", Toast.LENGTH_SHORT).show();\r\n                            finish();\r\n                        }\r\n\r\n\r\n                        /*parentIntent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);\r\n                        parentIntent.putExtra(\"idEvento\", documentId);\r\n                        startActivity(parentIntent);\r\n                        finish();*/\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        Log.w(TAG, \"Error adding document\", e);\r\n                    }\r\n                });\r\n                        /*.addOnCompleteListener(new OnCompleteListener<DocumentReference>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<DocumentReference> task) {\r\n                                Log.d(TAG, \"DocumentSnapshot written with ID: \" + task.getResult().getId());\r\n                                documentId = task.getResult().getId();\r\n                                evento.setIdEvento(documentId);\r\n                                db.collection(\"Eventi\").document(documentId).update(\"idEvento\", documentId);\r\n                                uploadImage();\r\n\r\n                                if(cond) {\r\n                                    db.collection(\"Eventi\").document(idEvento).delete();\r\n                                    //db.collection(\"Eventi\").document(idEvento).update(evento);\r\n                                }\r\n                            }\r\n                        })\r\n                        .addOnFailureListener(new OnFailureListener() {\r\n                            @Override\r\n                            public void onFailure(@NonNull Exception e) {\r\n                                Log.w(TAG, \"Error adding document\", e);\r\n                            }\r\n                        });*/\r\n            }else {\r\n                Toast.makeText(NewEventsActivity.this, \"Dati inseriti non corretti\", Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private Boolean dataOraValide(Evento evento){\r\n\r\n        boolean validita = false;\r\n\r\n        try {\r\n            Date dataEvento = new SimpleDateFormat(\"dd/MM/yyyy\").parse(evento.getData());\r\n            Date dataAttuale = new Date(System.currentTimeMillis());\r\n\r\n            Calendar cal = Calendar.getInstance();\r\n            String orario = evento.getOrario();\r\n            int minapp = Integer.valueOf(orario.substring(3,5));\r\n            int oraapp = Integer.valueOf(orario.substring(0,2));\r\n\r\n            if(dataEvento.compareTo(dataAttuale) >= 0) {\r\n                if(dataEvento.compareTo(dataAttuale) == 0) {\r\n                    if(oraapp > (cal.get(Calendar.HOUR_OF_DAY) + 1) &&\r\n                            minapp <= cal.get(Calendar.MINUTE)) {\r\n                        validita = true;\r\n                    } else Toast.makeText(this, \"L'evento deve essere almeno tra un'ora da adesso\", Toast.LENGTH_LONG).show();\r\n                } else validita = true;\r\n            } else Toast.makeText(this, \"Data inserita non valida\", Toast.LENGTH_LONG).show();\r\n\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return validita;\r\n    }\r\n\r\n    private String getMailUtenteLoggato(){\r\n        Gson gson = new Gson();\r\n        SharedPreferences prefs = getApplicationContext().getSharedPreferences(\"Login\", Context.MODE_PRIVATE);\r\n        String json = prefs.getString(\"utente\", \"no\");\r\n        String mailUtenteLoggato;\r\n\r\n        if(!json.equals(\"no\")) {\r\n            Utente utente = gson.fromJson(json, Utente.class);\r\n            mailUtenteLoggato = utente.getMailPath();\r\n            Log.d(\"mailutenteLoggato\", mailUtenteLoggato);\r\n        } else {\r\n            SharedPreferences prefs1 = getApplicationContext().getSharedPreferences(\"LoginTemporaneo\",Context.MODE_PRIVATE);\r\n            mailUtenteLoggato = prefs1.getString(\"mail\", \"no\");\r\n            Log.d(\"mail\", mailUtenteLoggato);\r\n        }\r\n        return mailUtenteLoggato;\r\n    }\r\n\r\n    @Override\r\n    public void onSaveInstanceState(@NonNull Bundle outState, @NonNull PersistableBundle outPersistentState) {\r\n        super.onSaveInstanceState(outState, outPersistentState);\r\n        mapView.onSaveInstanceState(outState);\r\n    }\r\n\r\n    @Override\r\n    public void onLowMemory() {\r\n        super.onLowMemory();\r\n        mapView.onLowMemory();\r\n    }\r\n\r\n    public void addImgEvent(View view) {\r\n        openImage();\r\n    }\r\n\r\n    private void openImage(){\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(Intent.createChooser(intent, \"Select Picture\"), PICK_IMAGE);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if(requestCode == PICK_IMAGE && resultCode == RESULT_OK){\r\n            imageUri = data.getData();\r\n            ImageView imageView= findViewById(R.id.immagineEvento);\r\n            Picasso.get().load(imageUri).into(imageView); //mette l'immagine nell'ImageView di questa activity\r\n        }\r\n\r\n    }\r\n\r\n    public boolean controlloEditText(String nomeEvento, String numMaxPartecipanti, String descrEvento, String citta, String indirizzo) {\r\n        boolean isValid = false;\r\n\r\n        TextInputLayout textInputLayoutNome = findViewById(R.id.textInputNomeEventoLayout);\r\n        TextInputLayout textInputLayoutNumMaxPartecipanti = findViewById(R.id.textInputNumMaxPartecipantiLayout);\r\n        TextInputLayout textInputLayoutDescrEvento = findViewById(R.id.textInputDescrEvento);\r\n        TextInputLayout textInputLayoutCitta = findViewById(R.id.textInputCittaLayoutEvento);\r\n        TextInputLayout textInputLayoutIndirizzo = findViewById(R.id.textInputIndirizzo);\r\n\r\n        if ((!nomeEvento.isEmpty()) && (!numMaxPartecipanti.isEmpty()) && (!descrEvento.isEmpty()) && (!citta.isEmpty()) && (!indirizzo.isEmpty())) { //se sono tutti validi\r\n            textInputLayoutNome.setErrorEnabled(false);\r\n            textInputLayoutNumMaxPartecipanti.setErrorEnabled(false);\r\n            textInputLayoutDescrEvento.setErrorEnabled(false);\r\n            textInputLayoutCitta.setErrorEnabled(false);\r\n            textInputLayoutIndirizzo.setErrorEnabled(false);\r\n            isValid = true;\r\n\r\n        } else {\r\n            if (nomeEvento.isEmpty() && numMaxPartecipanti.isEmpty() && descrEvento.isEmpty() && citta.isEmpty() && indirizzo.isEmpty()) { //se sono tutti vuoti\r\n                Toasty.warning(NewEventsActivity.this, getText(R.string.fill_in_all_fields), Toast.LENGTH_SHORT).show();\r\n\r\n                textInputLayoutNome.setError(getText(R.string.enter_event_name));\r\n                textInputLayoutNumMaxPartecipanti.setError(getText(R.string.enter_group_description));\r\n                textInputLayoutDescrEvento.setError(getText(R.string.enter_event_description));\r\n                textInputLayoutCitta.setError(getText(R.string.enter_event_city));\r\n                textInputLayoutIndirizzo.setError(getText(R.string.enter_event_address));\r\n            } else {\r\n\r\n                //se solo uno tra tutti è vuoto\r\n                if (indirizzo.isEmpty()) {\r\n                    textInputLayoutIndirizzo.setError(getText(R.string.enter_event_address));\r\n                    textInputLayoutNome.setErrorEnabled(false);\r\n                    textInputLayoutNumMaxPartecipanti.setErrorEnabled(false);\r\n                    textInputLayoutDescrEvento.setErrorEnabled(false);\r\n                    textInputLayoutCitta.setErrorEnabled(false);\r\n                }\r\n\r\n                if (citta.isEmpty()) {\r\n                    textInputLayoutCitta.setError(getText(R.string.enter_event_city));\r\n                    textInputLayoutNome.setErrorEnabled(false);\r\n                    textInputLayoutNumMaxPartecipanti.setErrorEnabled(false);\r\n                    textInputLayoutDescrEvento.setErrorEnabled(false);\r\n                    textInputLayoutIndirizzo.setErrorEnabled(false);\r\n                }\r\n\r\n                if (descrEvento.isEmpty()) {\r\n                    textInputLayoutDescrEvento.setError(getText(R.string.enter_event_description));\r\n                    textInputLayoutNome.setErrorEnabled(false);\r\n                    textInputLayoutNumMaxPartecipanti.setErrorEnabled(false);\r\n                    textInputLayoutCitta.setErrorEnabled(false);\r\n                    textInputLayoutIndirizzo.setErrorEnabled(false);\r\n                }\r\n\r\n                if (numMaxPartecipanti.isEmpty()) {\r\n                    textInputLayoutNumMaxPartecipanti.setError(getText(R.string.enter_event_max_participants_number));\r\n                    textInputLayoutNome.setErrorEnabled(false);\r\n                    textInputLayoutDescrEvento.setErrorEnabled(false);\r\n                    textInputLayoutCitta.setErrorEnabled(false);\r\n                    textInputLayoutIndirizzo.setErrorEnabled(false);\r\n                }\r\n\r\n                if (nomeEvento.isEmpty()) {\r\n                    textInputLayoutNome.setError(getText(R.string.enter_group_name));\r\n                    textInputLayoutNumMaxPartecipanti.setErrorEnabled(false);\r\n                    textInputLayoutDescrEvento.setErrorEnabled(false);\r\n                    textInputLayoutCitta.setErrorEnabled(false);\r\n                    textInputLayoutIndirizzo.setErrorEnabled(false);\r\n                }\r\n\r\n            }\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    private  void uploadImage(){\r\n        final ProgressDialog pd = new ProgressDialog(this);\r\n        pd.setMessage(getText(R.string.loading));\r\n        pd.show();\r\n\r\n        Log.d(\"imageUri\", String.valueOf(imageUri));\r\n        Log.d(\"documentID\", String.valueOf(documentId));\r\n\r\n        if((imageUri != null) && (documentId != null)){\r\n            final StorageReference fileRef = FirebaseStorage.getInstance().getReference().child(\"eventi\").child(documentId);\r\n\r\n            fileRef.putFile(imageUri).addOnCompleteListener(new OnCompleteListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<UploadTask.TaskSnapshot> task) {\r\n                    fileRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                        @Override\r\n                        public void onSuccess(Uri uri) {\r\n                            String url = uri.toString();\r\n\r\n                            Log.d(\"downloadUrl\", url);\r\n                            //pd.dismiss();\r\n                            Toast.makeText(NewEventsActivity.this, getText(R.string.image_uploaded), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnCanceledListener(new OnCanceledListener() {\r\n                        @Override\r\n                        public void onCanceled() {\r\n                            Toast.makeText(NewEventsActivity.this, getText(R.string.image_not_uploaded), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/batsoftware/contagiapp/eventi/NewEventsActivity.java b/app/src/main/java/com/batsoftware/contagiapp/eventi/NewEventsActivity.java
--- a/app/src/main/java/com/batsoftware/contagiapp/eventi/NewEventsActivity.java	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/app/src/main/java/com/batsoftware/contagiapp/eventi/NewEventsActivity.java	(date 1635964984210)
@@ -132,7 +132,8 @@
         if(cond) {
 
             idEvento = bundle.getString("idEvento");
-            final ImageView img = findViewById(R.id.imgProfiloEvento);
+            TextView modifica = findViewById(R.id.textView2);
+            modifica.setText(getText(R.string.modifica_evento));
 
             db.collection("Eventi")
                     .document(idEvento)
@@ -176,10 +177,7 @@
                     });
         }
 
-//TODO controllare se la modifica evento funziona e se la chiamata di
-// questa pagina funziona senza problemi sia da "profiloEventoAdminFragment"
-// che da "EventsFragment" e perchè torna indietro in ProfiloEventoFragment anzichè EventsFragment
-// aggiustare i controlli per data e orario e capire perchè quando apro il calendario anzichè 12 mi esce 1
+//TODO aggiustare i controlli per data e orario e capire perchè quando apro il calendario anzichè 12 mi esce 1
 
         ArrayAdapter<String> adapterRegione = new ArrayAdapter<String>(this,
                 android.R.layout.simple_dropdown_item_1line, Regions.all_regions);
@@ -398,6 +396,11 @@
 
 
     private void addEventToDb(){
+        if(cittaSelezionata == null && autoCompleteCity.getText().toString() != null) {
+                cittaSelezionata = autoCompleteCity.getText().toString();
+                regioneSelezionata = autoCompleteRegion.getText().toString();
+                provinciaSelezionata = autoCompleteProvincia.getText().toString();
+        }
 
         if(controlloEditText(nome.getText().toString(), numeroMaxP.getText().toString(), descrizione.getText().toString(), cittaSelezionata, indirizzo.getText().toString())){
             String mail = getMailUtenteLoggato();
@@ -436,22 +439,10 @@
 
                         if(cond) {
                             db.collection("Eventi").document(idEvento).delete();
-                            //db.collection("Eventi").document(idEvento).update(evento);
+                            //TODO se io non carico una nuova immagine per l'evento, ma dato che modificando l'evento l'id cambia,
+                            // bisogna ricaricare l'immagine dell'evento (quella vecchia) con il nuovo id
 
                             Toast.makeText(NewEventsActivity.this, "Evento modificato", Toast.LENGTH_SHORT).show();
-
-                            /*ProfiloEventoAdminFragment eventoAdmin = new ProfiloEventoAdminFragment();
-
-                            Bundle bun = new Bundle();
-                            bun.putString("idEvento", documentId);
-
-                            eventoAdmin.setArguments(bun);
-                            FragmentTransaction fr = getSupportFragmentManager().beginTransaction();
-                            fr.replace(R.id.new_event,eventoAdmin);
-                            fr.addToBackStack(null); //serve per tornare al fragment precedente
-                            fr.commit();*/
-
-//TODO il problema è quando si va da questa activity a profiloEventoAdminFragment
                             finish();
                         } else {
                             Toast.makeText(NewEventsActivity.this, "Evento aggiunto", Toast.LENGTH_SHORT).show();
@@ -470,27 +461,6 @@
                         Log.w(TAG, "Error adding document", e);
                     }
                 });
-                        /*.addOnCompleteListener(new OnCompleteListener<DocumentReference>() {
-                            @Override
-                            public void onComplete(@NonNull Task<DocumentReference> task) {
-                                Log.d(TAG, "DocumentSnapshot written with ID: " + task.getResult().getId());
-                                documentId = task.getResult().getId();
-                                evento.setIdEvento(documentId);
-                                db.collection("Eventi").document(documentId).update("idEvento", documentId);
-                                uploadImage();
-
-                                if(cond) {
-                                    db.collection("Eventi").document(idEvento).delete();
-                                    //db.collection("Eventi").document(idEvento).update(evento);
-                                }
-                            }
-                        })
-                        .addOnFailureListener(new OnFailureListener() {
-                            @Override
-                            public void onFailure(@NonNull Exception e) {
-                                Log.w(TAG, "Error adding document", e);
-                            }
-                        });*/
             }else {
                 Toast.makeText(NewEventsActivity.this, "Dati inseriti non corretti", Toast.LENGTH_LONG).show();
             }
@@ -589,6 +559,8 @@
         TextInputLayout textInputLayoutDescrEvento = findViewById(R.id.textInputDescrEvento);
         TextInputLayout textInputLayoutCitta = findViewById(R.id.textInputCittaLayoutEvento);
         TextInputLayout textInputLayoutIndirizzo = findViewById(R.id.textInputIndirizzo);
+        TextInputLayout textInputLayoutRegione = findViewById(R.id.textInputRegioneEventoLayout);
+        TextInputLayout textInputLayoutProvincia = findViewById(R.id.textInputProvinciaEventoLayout);
 
         if ((!nomeEvento.isEmpty()) && (!numMaxPartecipanti.isEmpty()) && (!descrEvento.isEmpty()) && (!citta.isEmpty()) && (!indirizzo.isEmpty())) { //se sono tutti validi
             textInputLayoutNome.setErrorEnabled(false);
@@ -599,7 +571,7 @@
             isValid = true;
 
         } else {
-            if (nomeEvento.isEmpty() && numMaxPartecipanti.isEmpty() && descrEvento.isEmpty() && citta.isEmpty() && indirizzo.isEmpty()) { //se sono tutti vuoti
+            if (nomeEvento.isEmpty() && numMaxPartecipanti.isEmpty() && descrEvento.isEmpty() && citta == null && indirizzo.isEmpty()) { //se sono tutti vuoti
                 Toasty.warning(NewEventsActivity.this, getText(R.string.fill_in_all_fields), Toast.LENGTH_SHORT).show();
 
                 textInputLayoutNome.setError(getText(R.string.enter_event_name));
@@ -618,8 +590,10 @@
                     textInputLayoutCitta.setErrorEnabled(false);
                 }
 
-                if (citta.isEmpty()) {
+                if (citta == null) {
                     textInputLayoutCitta.setError(getText(R.string.enter_event_city));
+                    textInputLayoutRegione.setError(getText(R.string.inserisci_regione));
+                    textInputLayoutProvincia.setError(getText(R.string.inserisci_provincia));
                     textInputLayoutNome.setErrorEnabled(false);
                     textInputLayoutNumMaxPartecipanti.setErrorEnabled(false);
                     textInputLayoutDescrEvento.setErrorEnabled(false);
Index: app/src/main/java/com/batsoftware/contagiapp/utente/ModificaUtenteActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.batsoftware.contagiapp.utente;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.AutoCompleteTextView;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.batsoftware.contagiapp.R;\r\n//import com.example.contagiapp.registrazione.RegistrationActivity;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.google.gson.Gson;\r\n\r\nimport java.util.Calendar;\r\nimport java.util.Collections;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\nimport dizionarioPerCitta.Cities;\r\nimport dizionarioPerCitta.Province;\r\nimport dizionarioPerCitta.Regions;\r\n\r\npublic class ModificaUtenteActivity extends AppCompatActivity implements AdapterView.OnItemSelectedListener{\r\n    private TextView dataNascita;\r\n    private Button modifica;\r\n    private DatePickerDialog.OnDateSetListener dataDiNascita;\r\n    private static final String TAG = \"RegistrationActivity\";\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    private int anno = 0, mese = 0, giorno = 0;\r\n\r\n    //Per gli errori\r\n    private TextInputLayout nomeLayout;\r\n    private TextInputLayout cognomeLayout;\r\n    private TextInputLayout phoneLayout;\r\n    private TextInputLayout mailLayout;\r\n    private TextInputLayout dataLayout;\r\n    private TextInputLayout psw1Layout;\r\n    private TextInputLayout psw2Layout;\r\n\r\n    private TextInputEditText nome;\r\n    private TextInputEditText cognome;\r\n    private TextInputEditText phone;\r\n    private TextInputEditText mail;\r\n    private TextInputEditText data;\r\n    private TextInputEditText psw1;\r\n    private TextInputEditText psw2;\r\n\r\n    private AutoCompleteTextView autoCompleteRegion;\r\n    private AutoCompleteTextView autoCompleteProvincia;\r\n    private AutoCompleteTextView autoCompleteCity;\r\n    private TextInputLayout layoutRegion;\r\n    private TextInputLayout layoutProvince;\r\n    private TextInputLayout layoutCity;\r\n\r\n\r\n    String regioneSelezionata = null;\r\n    String provinciaSelezionata = null;\r\n    String cittaSelezionata = null;\r\n    ArrayAdapter<String> adapterProvincia = null;\r\n    ArrayAdapter<String> adapterRegione = null;\r\n    ArrayAdapter<String> adapterCitta = null;\r\n\r\n    private Utente utente = new Utente();\r\n\r\n\r\n    //TODO fare le cose scritte sotto:\r\n    //rivedere il fatto di utilizzare le regioni e province (con spinner) quindi se toglierli e mettere solo spinner nazioni e una textbox per la città\r\n    //ricontrollare tutto il codice di questa classe\r\n    //vedere se modificare la pagina profilo utente aggiungendo altre cose o togliendo quelle già presenti\r\n    //vedere se funziona tutto il codice\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_modifica_dati_utente);\r\n\r\n        nome = (TextInputEditText) findViewById(R.id.editTextName);\r\n        cognome = (TextInputEditText) findViewById(R.id.editTextSurname);\r\n        phone = (TextInputEditText) findViewById(R.id.editTextPhone);\r\n        data = (TextInputEditText) findViewById(R.id.editTextDataNascita);\r\n        mail = (TextInputEditText) findViewById(R.id.editTextTextEmailAddress);\r\n        psw1 = (TextInputEditText) findViewById(R.id.editTextTextPassword) ;\r\n        psw2 = (TextInputEditText) findViewById(R.id.editTextRepeatPassword);\r\n\r\n        nomeLayout = (TextInputLayout) findViewById(R.id.textInputNameLayout);\r\n        cognomeLayout = (TextInputLayout) findViewById(R.id.textInputSurnameLayout);\r\n        phoneLayout = (TextInputLayout) findViewById(R.id.textInputPhoneLayout);\r\n        mailLayout = (TextInputLayout) findViewById(R.id.textInputEmailLayout);\r\n        dataLayout = (TextInputLayout) findViewById(R.id.textInputBirthLayout);\r\n        psw1Layout = (TextInputLayout) findViewById(R.id.textInputPasswordLayout);\r\n        psw2Layout = (TextInputLayout) findViewById(R.id.textInputRepeatPasswordLayout);\r\n\r\n        autoCompleteRegion = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextRegioneModActivity);\r\n        autoCompleteProvincia = findViewById(R.id.autoCompleteTextProvinciaModActivity);\r\n        autoCompleteCity = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextCittaModActivity);\r\n        layoutRegion = findViewById(R.id.textInputRegioneLayoutModActivity);\r\n        layoutProvince = findViewById(R.id.textInputProvinciaLayoutModActivity);\r\n        layoutCity = findViewById(R.id.textInputCittaLayoutModActivity);\r\n\r\n        adapterRegione = new ArrayAdapter<String>(this,\r\n                android.R.layout.simple_list_item_1, Regions.all_regions);\r\n\r\n\r\n        autoCompleteRegion.setAdapter(adapterRegione);\r\n        autoCompleteProvincia.setEnabled(false);\r\n        autoCompleteCity.setEnabled(false);\r\n\r\n\r\n        autoCompleteRegion.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                Log.d(\"Regione selezionata\", autoCompleteRegion.getText().toString());\r\n                regioneSelezionata = autoCompleteRegion.getText().toString();\r\n                autoCompleteProvincia.setEnabled(true);\r\n                adapterProvincia = new ArrayAdapter<String>(ModificaUtenteActivity.this,\r\n                        android.R.layout.simple_dropdown_item_1line,\r\n                        Province.map.get(autoCompleteRegion.getText().toString()));\r\n                autoCompleteProvincia.setAdapter(adapterProvincia);\r\n\r\n                autoCompleteProvincia.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                    @Override\r\n                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                        Log.d(\"Provincia selezionata\", autoCompleteProvincia.getText().toString());\r\n                        provinciaSelezionata = autoCompleteProvincia.getText().toString();\r\n                        autoCompleteCity.setEnabled(true);\r\n                        adapterCitta = new ArrayAdapter<String>(ModificaUtenteActivity.this,\r\n                                android.R.layout.simple_dropdown_item_1line,\r\n                                Cities.mapPerProvincia.get(autoCompleteProvincia.getText().toString()));\r\n\r\n                        autoCompleteCity.setAdapter(adapterCitta);\r\n\r\n                        autoCompleteCity.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                            @Override\r\n                            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                                Log.d(\"Citta selezionata\", autoCompleteCity.getText().toString());\r\n                                cittaSelezionata = autoCompleteCity.getText().toString();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n        autoCompleteProvincia.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                Log.d(\"provincia\", String.valueOf(provinciaSelezionata));\r\n                autoCompleteCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                Log.d(\"provincia\", String.valueOf(provinciaSelezionata));\r\n                autoCompleteCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n        autoCompleteRegion.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                Log.d(\"regione\", String.valueOf(regioneSelezionata));\r\n                autoCompleteProvincia.setEnabled(false);\r\n                autoCompleteProvincia.setText(null);\r\n                autoCompleteCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                Log.d(\"regione\", String.valueOf(regioneSelezionata));\r\n                autoCompleteProvincia.setEnabled(false);\r\n                autoCompleteProvincia.setText(null);\r\n                autoCompleteCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n        Gson gson = new Gson();\r\n        SharedPreferences prefs = getApplicationContext().getSharedPreferences(\"Login\", Context.MODE_PRIVATE);\r\n        String json = prefs.getString(\"utente\", \"no\");\r\n        String mailUtenteLoggato;\r\n        if(!json.equals(\"no\")) {\r\n            utente = gson.fromJson(json, Utente.class);\r\n            mailUtenteLoggato = utente.getMailPath();\r\n            Log.d(\"mailutenteLoggato\", mailUtenteLoggato);\r\n        } else {\r\n            SharedPreferences prefs1 = getApplicationContext().getSharedPreferences(\"LoginTemporaneo\",Context.MODE_PRIVATE);\r\n            mailUtenteLoggato = prefs1.getString(\"mail\", \"no\");\r\n            Log.d(\"mail\", mailUtenteLoggato);\r\n\r\n            db.collection(\"Utenti\").whereEqualTo(\"mail\", mailUtenteLoggato).get()\r\n                    .addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                            if(task.isSuccessful()) {\r\n                                for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                    utente = document.toObject(Utente.class);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n\r\n        nome.setText(utente.getNome());\r\n        cognome.setText(utente.getCognome());\r\n        autoCompleteRegion.setText(utente.getRegione());\r\n        autoCompleteProvincia.setText(utente.getProvince());\r\n        autoCompleteCity.setText(utente.getCitta());\r\n        phone.setText(utente.getTelefono());\r\n        data.setText(utente.getDataNascita());\r\n        mail.setText(utente.getMail());\r\n        psw1.setText(utente.getPassword());\r\n        psw2.setText(utente.getPassword());\r\n\r\n        RadioButton radioM = (RadioButton) findViewById(R.id.radioButton1);\r\n        RadioButton radioF = (RadioButton) findViewById(R.id.radioButton2);\r\n        if(utente.getGenere().equals(\"M\")) {\r\n            radioM.setChecked(true);\r\n            System.out.println(utente.getGenere() + \" M\");\r\n            System.out.println(utente.getGenere());\r\n        } else {\r\n            System.out.println(utente.getGenere() + \" F\");\r\n            System.out.println(utente.getGenere());\r\n            radioF.setChecked(true);\r\n        }\r\n\r\n\r\n        // collegamento button registrati con la mainActivity\r\n        modifica = (Button) findViewById(R.id.modificaDati);\r\n        modifica.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                switch (controlli_TextInput(nome, nomeLayout, cognome, cognomeLayout, mail, mailLayout, data, dataLayout, phone, phoneLayout, psw1, psw1Layout, psw2, psw2Layout,\r\n                        layoutRegion, autoCompleteRegion, layoutProvince, autoCompleteProvincia, layoutCity, autoCompleteCity)) {\r\n\r\n                    case 1:\r\n                        nomeLayout.setError(\"Inserisci nome\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci nome\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 2:\r\n                        cognomeLayout.setError(\"Inserisci cognome\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci cognome\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 3:\r\n                        dataLayout.setError(\"Inserisci data di nascita\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci data di nascita\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 4:\r\n                        layoutRegion.setError(\"Inserisci regione\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci regione\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 5:\r\n                        layoutProvince.setError(\"Inserisci provincia\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci provincia\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 6:\r\n                        layoutCity.setError(\"Inserisci citta\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci citta\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 7:\r\n                        mailLayout.setError(\"Inserisci mail\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci mail\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 8:\r\n                        phoneLayout.setError(\"Inserisci cellulare\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci cellulare\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 9:\r\n                        psw1Layout.setError(\"Inserisci password\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci Password\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 10:\r\n                        psw2Layout.setError(\"Inserisci password\");\r\n                        Toast.makeText(ModificaUtenteActivity.this, \"Inserisci nome\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    default:\r\n                        addToDb();\r\n                        break;\r\n                }\r\n                //per togliere i controlli togliere il commento alla riga successiva\r\n                //addToDb();\r\n            }\r\n        });\r\n\r\n\r\n        //Date Picker\r\n        dataNascita = (TextView) findViewById(R.id.editTextDataNascita);\r\n        dataNascita.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(\r\n                        ModificaUtenteActivity.this,\r\n                        android.R.style.Theme_Material_InputMethod,\r\n                        dataDiNascita,\r\n                        year, month, day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.LTGRAY));\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n        dataDiNascita = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                month++;\r\n                String date = null;\r\n                Log.d(TAG, \"onDateSet: date: \" + dayOfMonth + \"/\" + month + \"/\" + year);\r\n                if(month<=9) {\r\n                    date = dayOfMonth + \"/0\" + month + \"/\" + year;\r\n                }else\r\n                    date = dayOfMonth + \"/\" + month + \"/\" + year;\r\n\r\n                dataNascita.setText(date);\r\n            }\r\n        };\r\n    }\r\n\r\n    private int controlli_TextInput(TextInputEditText name, TextInputLayout nomeLayout, TextInputEditText surname, TextInputLayout cognomeLayout, TextInputEditText mail, TextInputLayout mailLayout,\r\n                                    TextInputEditText birth, TextInputLayout dataLayout, TextInputEditText phone, TextInputLayout phoneLayout, TextInputEditText psw1, TextInputLayout psw1Layout,\r\n                                    TextInputEditText psw2, TextInputLayout psw2Layout,\r\n                                    TextInputLayout regioneLayout, AutoCompleteTextView tvRegione,\r\n                                    TextInputLayout provinciaLayout, AutoCompleteTextView tvProvincia,\r\n                                    TextInputLayout cittaLayout,  AutoCompleteTextView tvCitta) {\r\n\r\n        if (isEmpty(name)) {\r\n            return 1;\r\n        } else nomeLayout.setError(null);\r\n\r\n        if (isEmpty(surname)) {\r\n            return 2;\r\n        } else cognomeLayout.setError(null);\r\n\r\n        if (isEmpty(birth)) {\r\n            return 3;\r\n        } else dataLayout.setError(null);\r\n\r\n        if (tvRegione.getText().toString() == null) {\r\n            return 4;\r\n        } else regioneLayout.setError(null);\r\n\r\n        if (tvProvincia.getText().toString() == null) {\r\n            return 5;\r\n        } else provinciaLayout.setError(null);\r\n\r\n        if (tvCitta.getText().toString() == null) {\r\n            return 6;\r\n        } else cittaLayout.setError(null);\r\n        if (isEmpty(mail)) {\r\n            return 7;\r\n        } else mailLayout.setError(null);\r\n\r\n        if (isEmpty(phone)) {\r\n            return 8;\r\n        } else phoneLayout.setError(null);\r\n\r\n        if (isEmpty(psw1)) {\r\n            return 9;\r\n        } else psw1Layout.setError(null);\r\n\r\n        if (isEmpty(psw2)) {\r\n            return 10;\r\n        } else psw2Layout.setError(null);\r\n\r\n\r\n        return 0;\r\n    }\r\n\r\n    private boolean isEmpty(TextInputEditText etText) {\r\n        if(etText.getText().toString().length() > 0)\r\n            return false;\r\n        return true;\r\n    }\r\n\r\n    public void openMainActivity(){\r\n        Intent mainIntent = new Intent(this, ProfiloActivity.class);\r\n        startActivity(mainIntent);\r\n        finish();\r\n    }\r\n\r\n    public void addToDb() {\r\n        // Create a new user with a first, middle, and last name\r\n        final Map<String, Object> user = new HashMap<>();\r\n\r\n        TextInputEditText name = (TextInputEditText) findViewById(R.id.editTextName);\r\n        String nome = name.getText().toString();\r\n        user.put(\"nome\", nome);\r\n        utente.setNome(nome);\r\n\r\n        TextInputEditText surname = (TextInputEditText) findViewById(R.id.editTextSurname);\r\n        String cognome = surname.getText().toString();\r\n        user.put(\"cognome\", cognome);\r\n        utente.setCognome(cognome);\r\n\r\n        RadioGroup radiogroup = (RadioGroup) findViewById(R.id.radiogroup);\r\n        int Idselezionato = radiogroup.getCheckedRadioButtonId();\r\n        RadioButton radiosex = (RadioButton) findViewById(Idselezionato);\r\n        user.put(\"genere\", radiosex.getText().toString());\r\n        utente.setGenere(radiosex.getText().toString());\r\n\r\n        TextView date = (TextView) findViewById(R.id.editTextDataNascita);\r\n        final String appoggio = date.getText().toString();\r\n\r\n\r\n        user.put(\"regione\", regioneSelezionata);\r\n        utente.setRegione(regioneSelezionata);\r\n\r\n\r\n        user.put(\"province\", provinciaSelezionata);\r\n        utente.setProvince(provinciaSelezionata);\r\n\r\n        user.put(\"citta\", cittaSelezionata);\r\n        utente.setCitta(cittaSelezionata);\r\n\r\n        EditText telefono = (EditText) findViewById(R.id.editTextPhone);\r\n        user.put(\"telefono\", telefono.getText().toString());\r\n        utente.setTelefono(telefono.getText().toString());\r\n\r\n        EditText password = (EditText) findViewById(R.id.editTextTextPassword);\r\n        final String psw1 = password.getText().toString();\r\n\r\n        EditText password2 = (EditText) findViewById(R.id.editTextRepeatPassword);\r\n        final String psw2 = password2.getText().toString();\r\n\r\n        EditText mail = (EditText) findViewById(R.id.editTextTextEmailAddress);\r\n        final String email = mail.getText().toString();\r\n\r\n        db.collection(\"Utenti\").whereEqualTo(\"mailPath\", utente.getMailPath()).whereNotIn(\"telefono\", Collections.singletonList(telefono.getText().toString())).get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot querySnapshots) {\r\n                        controlli(querySnapshots.isEmpty(), user, email, psw1, psw2, appoggio);\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {\r\n        String text = parent.getItemAtPosition(position).toString();\r\n        //Toast.makeText(parent.getContext(), text, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    //per spinner\r\n    @Override\r\n    public void onNothingSelected(AdapterView<?> parent) {\r\n\r\n    }\r\n\r\n    private void controlli(boolean cond, Map<String, Object> user1, String email, String psw1, String psw2, String appoggio) {\r\n        Calendar cal = Calendar.getInstance();\r\n        int l = appoggio.length();\r\n        boolean conddata= false;\r\n        boolean condemail= false;\r\n        switch (l) {\r\n            case 9:\r\n                anno = Integer.valueOf(appoggio.substring(l - 4, l));\r\n                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));\r\n                giorno = Integer.valueOf(appoggio.charAt(0)) - 48;\r\n                break;\r\n            case 10:\r\n                anno = Integer.valueOf(appoggio.substring(l - 4, l));\r\n                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));\r\n                giorno = Integer.valueOf(appoggio.substring(l - 10, l - 8));\r\n                break;\r\n        }\r\n\r\n        if (anno == (cal.get(Calendar.YEAR) - 14)) {\r\n            if(mese == cal.get(Calendar.MONTH)) {\r\n                if (giorno > cal.get(Calendar.DAY_OF_MONTH)) conddata = true;\r\n            } else if(mese > cal.get(Calendar.DAY_OF_MONTH)) conddata = true;\r\n        } else if(anno > (cal.get(Calendar.YEAR) - 14)) conddata = true;\r\n\r\n        if(!email.isEmpty()){\r\n            Pattern p = Pattern.compile(\".+@.+\\\\.[a-z]+\", Pattern.CASE_INSENSITIVE);\r\n            Matcher m = p.matcher(email);\r\n            boolean matchFound = m.matches();\r\n\r\n            String  expressionPlus=\"^[\\\\w\\\\-]([\\\\.\\\\w])+[\\\\w]+@([\\\\w\\\\-]+\\\\.)+[A-Z]{2,4}$\";\r\n            Pattern pPlus = Pattern.compile(expressionPlus, Pattern.CASE_INSENSITIVE);\r\n            Matcher mPlus = pPlus.matcher(email);\r\n            boolean matchFoundPlus = mPlus.matches();\r\n            condemail=(matchFound && matchFoundPlus);\r\n        }\r\n        if(!condemail) {\r\n            Toast.makeText(this, \"formato email non valido\", Toast.LENGTH_SHORT).show();\r\n            mailLayout.setError(\"Formato email non valido\");\r\n        }else\r\n\r\n        if(conddata && condemail)\r\n        {\r\n            Toast.makeText(this, \"Bisogna avere almeno 14 anni per iscriversi\", Toast.LENGTH_SHORT).show();\r\n            dataLayout.setError(\"Bisogna avere almeno 14 anni per iscriversi\");\r\n        } else {\r\n            user1.put(\"dataNascita\", appoggio);\r\n            utente.setDataNascita(appoggio);\r\n\r\n            if (!(psw1.equals(psw2))) {\r\n                Toast.makeText(this, \"Le password coincidono\", Toast.LENGTH_SHORT).show();\r\n                psw1Layout.setError(\"Le password coincidono\");\r\n                psw2Layout.setError(\"Le password coincidono\");\r\n            } else {\r\n                if (cond) {\r\n                    psw1Layout.setError(null);\r\n                    psw2Layout.setError(null);\r\n                    user1.put(\"password\", psw1);\r\n                    user1.put(\"mail\", email);\r\n                    utente.setPassword(psw1);\r\n                    utente.setMail(email);\r\n\r\n                    //elimina documento esiste e aggiunge quello nuovo\r\n                    db.collection(\"Utenti\").document(utente.getMailPath()).update(user1);\r\n\r\n                    SharedPreferences prefs = getApplicationContext().getSharedPreferences(\"Login\", MODE_PRIVATE);\r\n                    SharedPreferences.Editor editor = prefs.edit();\r\n                    Gson gson = new Gson();\r\n                    String json = prefs.getString(\"utente\", \"no\");\r\n                    if(json!=\"no\") {\r\n                        json = gson.toJson(utente);\r\n                        editor.putString(\"utente\", json);\r\n                        editor.commit ();\r\n                    } else {\r\n                        SharedPreferences prefs1 = getApplicationContext().getSharedPreferences(\"LoginTemporaneo\", MODE_PRIVATE);\r\n                        SharedPreferences.Editor editor1 = prefs1.edit();\r\n                        editor1.putString(\"mail\", email);\r\n                        editor1.commit ();\r\n                    }\r\n\r\n                    openMainActivity();\r\n                    finish();\r\n                } else {\r\n                    Toast.makeText(this, \"Mail già esistente\", Toast.LENGTH_SHORT).show();\r\n                    mailLayout.setError(\"Mail già esistente\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/batsoftware/contagiapp/utente/ModificaUtenteActivity.java b/app/src/main/java/com/batsoftware/contagiapp/utente/ModificaUtenteActivity.java
--- a/app/src/main/java/com/batsoftware/contagiapp/utente/ModificaUtenteActivity.java	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/app/src/main/java/com/batsoftware/contagiapp/utente/ModificaUtenteActivity.java	(date 1635963694752)
@@ -91,11 +91,11 @@
     private Utente utente = new Utente();
 
 
-    //TODO fare le cose scritte sotto:
-    //rivedere il fatto di utilizzare le regioni e province (con spinner) quindi se toglierli e mettere solo spinner nazioni e una textbox per la città
-    //ricontrollare tutto il codice di questa classe
-    //vedere se modificare la pagina profilo utente aggiungendo altre cose o togliendo quelle già presenti
-    //vedere se funziona tutto il codice
+    //TODO fare le cose scritte sotto:  + controlli su autocomplete
+    // rivedere il fatto di utilizzare le regioni e province (con spinner) quindi se toglierli e mettere solo spinner nazioni e una textbox per la città
+    // ricontrollare tutto il codice di questa classe
+    // vedere se modificare la pagina profilo utente aggiungendo altre cose o togliendo quelle già presenti
+    // vedere se funziona tutto il codice
 
 
 
Index: app/src/main/res/layout/fragment_new_events.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    app:layout_constraintBottom_toBottomOf=\"parent\"\r\n    app:layout_constraintStart_toStartOf=\"parent\"\r\n    tools:context=\"com.batsoftware.contagiapp.eventi.NewEventsActivity\"\r\n    android:id=\"@+id/new_event\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:padding=\"20dp\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:fontFamily=\"sans-serif-black\"\r\n            android:gravity=\"center\"\r\n            android:padding=\"20dp\"\r\n            android:text=\"@string/create_event\"\r\n            android:textAppearance=\"@style/TextAppearance.AppCompat.Display1\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"26sp\"\r\n            android:textStyle=\"bold\" />\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputNomeEventoLayout\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:hint=\"@string/event_name\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/editTextNomeEvento\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textPersonName\"\r\n                android:labelFor=\"@id/editTextNomeEvento\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputNumMaxPartecipantiLayout\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:hint=\"@string/maximum_number_of_participants\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/editTextNumMaxPartecipanti\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"number\"\r\n                android:labelFor=\"@id/editTextNumMaxPartecipanti\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:hint=\"@string/event_date\"\r\n            app:errorEnabled=\"true\">\r\n\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/dataEvento\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:editable=\"false\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/textView6\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"@string/event_time2dots\"\r\n            android:textSize=\"24sp\"\r\n            android:textStyle=\"bold\" />\r\n\r\n        <TextClock\r\n            android:id=\"@+id/orarioEvento\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:ems=\"10\"\r\n            android:hint=\"Orario Evento\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:textSize=\"20sp\" />\r\n\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputDescrEvento\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"32dp\"\r\n            android:hint=\"@string/event_description\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/editTextDescrEvento\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textMultiLine\"\r\n                android:labelFor=\"@id/editTextDescrEvento\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputRegioneEventoLayout\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:hint=\"@string/region\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n            >\r\n\r\n\r\n            <AutoCompleteTextView\r\n                android:id=\"@+id/autoCompleteTextRegioneEvento\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textAutoComplete|textAutoCorrect\"\r\n                android:padding=\"12dp\"\r\n                android:textColor=\"@color/black\" />\r\n\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputProvinciaEventoLayout\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:hint=\"@string/province\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n\r\n\r\n            <AutoCompleteTextView\r\n                android:id=\"@+id/autoCompleteTextProvinciaEvento\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textAutoComplete|textAutoCorrect\"\r\n                android:padding=\"12dp\"\r\n                android:textColor=\"@color/black\" />\r\n\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputCittaLayoutEvento\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:hint=\"@string/city\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n            >\r\n\r\n\r\n            <AutoCompleteTextView\r\n                android:id=\"@+id/autoCompleteTextCittaEvento\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:imeOptions=\"actionSearch\"\r\n                android:inputType=\"textAutoComplete|textAutoCorrect\"\r\n                android:padding=\"12dp\"\r\n                android:textColor=\"@color/black\" />\r\n\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n\r\n        <com.google.android.material.textfield.TextInputLayout\r\n            android:id=\"@+id/textInputIndirizzo\"\r\n            style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:hint=\"@string/event_address\"\r\n            app:endIconMode=\"clear_text\"\r\n            app:errorEnabled=\"true\">\r\n\r\n            <com.google.android.material.textfield.TextInputEditText\r\n                android:id=\"@+id/editTextIndirizzo\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:inputType=\"textPersonName\"\r\n                android:labelFor=\"@id/editTextIndirizzo\" />\r\n        </com.google.android.material.textfield.TextInputLayout>\r\n\r\n        <com.google.android.material.button.MaterialButton\r\n            android:id=\"@+id/btnAddImgEvento\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:onClick=\"addImgEvent\"\r\n            android:text=\"@string/upload_image\"\r\n            app:cornerRadius=\"20dp\"></com.google.android.material.button.MaterialButton>\r\n\r\n        <ImageView\r\n            android:id=\"@+id/immagineEvento\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:maxHeight=\"150dp\"\r\n            android:adjustViewBounds=\"true\"/>\r\n\r\n\r\n        <com.google.android.gms.maps.MapView\r\n            android:id=\"@+id/map_view\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"200dp\">\r\n        </com.google.android.gms.maps.MapView>\r\n\r\n        <com.google.android.material.button.MaterialButton\r\n            android:id=\"@+id/buttonCreaEvento\"\r\n            android:layout_width=\"152dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginBottom=\"50dp\"\r\n            android:text=\"@string/create_event\"\r\n            app:cornerRadius=\"20dp\" />\r\n\r\n    </LinearLayout>\r\n\r\n</ScrollView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_new_events.xml b/app/src/main/res/layout/fragment_new_events.xml
--- a/app/src/main/res/layout/fragment_new_events.xml	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/app/src/main/res/layout/fragment_new_events.xml	(date 1635963694648)
@@ -228,12 +228,6 @@
             android:adjustViewBounds="true"/>
 
 
-        <com.google.android.gms.maps.MapView
-            android:id="@+id/map_view"
-            android:layout_width="match_parent"
-            android:layout_height="200dp">
-        </com.google.android.gms.maps.MapView>
-
         <com.google.android.material.button.MaterialButton
             android:id="@+id/buttonCreaEvento"
             android:layout_width="152dp"
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">ContagiApp</string>\r\n    <string name=\"home\">Home</string>\r\n\r\n\r\n    <!--Campi di registrazione-->\r\n    <string name=\"birth\">Data di nascita</string>\r\n\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n    <string name=\"login\">Accedi</string>\r\n    <string name=\"signUp\">Registrati</string>\r\n    <string name=\"prompt_email\">Email</string>\r\n    <string name=\"prompt_password\">Password</string>\r\n    <string name=\"repeat_password\">Ripeti Password</string>\r\n    <string name=\"action_sign_in_short\">Sign in</string>\r\n    <string name=\"welcome\">\"Benvenuto !\"</string>\r\n    <string name=\"invalid_username\">Not a valid username</string>\r\n    <string name=\"invalid_password\">Password deve contenere più di 5 caratteri</string>\r\n    <string name=\"login_failed\">\"Accesso fallito\"</string>\r\n    <string name=\"phone\">Cellulare</string>\r\n    <string name=\"search\">Cerca</string>\r\n    <string name=\"invite\">Invita</string>\r\n    <string name=\"participants\"> Partecipanti</string>\r\n    <string name=\"available\"> posti disponibili</string>\r\n\r\n\r\n        <plurals name=\"nPartecipants\">\r\n            <item quantity=\"one\">%d partecipante</item>\r\n            <item quantity=\"other\">%d partecipanti</item>\r\n        </plurals>\r\n\r\n\r\n    <string name=\"remember_me\">Ricordami</string>\r\n    <string name=\"createAccount\">Crea account</string>\r\n    <string name=\"VuotoEventi\">Non hai partecipato ad alcun evento utlimamente. Clicca su fine per completare l operazione</string>\r\n\r\n    //Nomi AppBar\r\n    <string name=\"settings\">Impostazioni</string>\r\n\r\n    //bottoni in impostazioni\r\n    <string name=\"SegnalaPositività\">Segnala positività</string>\r\n    <string name=\"SegnalaNegatività\">Segnala negatività</string>\r\n    <string name=\"DarkTheme\">Tema scuro</string>\r\n    <string name=\"Notifiche\">Notifiche</string>\r\n    <string name=\"InformativaPrivacy\">Informativa e privacy</string>\r\n\r\n\r\n\r\n    <string-array name=\"nazioni\">\r\n        <item>Italia</item>\r\n        <item>Francia</item>\r\n        <item>Spagna</item>\r\n        <item>Germania</item>\r\n    </string-array>\r\n\r\n    <string-array name=\"regioniItaliane\">\r\n        <item>Puglia</item>\r\n        <item>Basilicata</item>\r\n        <item>Campania</item>\r\n    </string-array>\r\n\r\n    <string-array name=\"ProvincePuglia\">\r\n        <item>BA</item>\r\n        <item>BAT</item>\r\n        <item>FG</item>\r\n        <item>LE</item>\r\n        <item>BR</item>\r\n        <item>TA</item>\r\n    </string-array>\r\n\r\n    <string name=\"EventoEliminato\">Evento eliminato</string>\r\n\r\n    //ERRORI\r\n\r\n    <string-array name=\"Citta\">\r\n        <item>Bari</item>\r\n        <item>Molfetta</item>\r\n    </string-array>\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n\r\n\r\n    <string name=\"rimuovi_partecipante\">Rimuovi partecipante</string>\r\n\r\n    <string name=\"operazione_eseguita\">Operazione eseguita</string>\r\n\r\n\r\n    //Descrizione stati\r\n    <string name=\"DescrStatoGiallo\">Lo stato giallo indica che non c\\'è stato alcun contatto con persone positive</string>\r\n    <string name=\"DescrStatoVerde\">Lo stato verde indica che l\\'utente è negativo al tampone effettuato</string>\r\n    <string name=\"DescrStatoArancione\">Lo stato arancione indica che si sono verificati contatti con persone positive</string>\r\n    <string name=\"DescrStatoRosso\">Lo stato rosso indica si è positivi al COVID-19</string>\r\n\r\n\r\n    //HomeFragment\r\n    <string name=\"your_state\">Il tuo stato</string>\r\n    <string name=\"where_do_you_want_to_go\">Dove vuoi andare?</string>\r\n    <string name=\"search_for_available_events\">Cerca gli eventi disponibili oppure creane uno</string>\r\n    <string name=\"search_event\">Cerca evento</string>\r\n    <string name=\"create_event\">Crea evento</string>\r\n\r\n    //GroupFragment\r\n    <string name=\"your_create_groups\">I tuoi gruppi</string>\r\n    <string name=\"your_groups_partecipante\">Gruppi a cui partecipi</string>\r\n\r\n    //addFriends\r\n    <string name=\"select_user\">Seleziona utente</string>\r\n\r\n    //addImgGruppo\r\n    <string name=\"add_cover_img\">Aggiungi un\\'immagine di copertina</string>\r\n    <string name=\"cover_img\">immagine di copertina</string>\r\n    <string name=\"descr_add_cover_img\">Dai un\\'idea alle persone di cosa tratta il tuo gruppo con una foto.</string>\r\n    <string name=\"upload_cover_img\">Carica immagine di copertina</string>\r\n    <string name=\"next\">Avanti</string>\r\n\r\n    //activity_crea_gruppo\r\n    <string name=\"group_name\">nome del gruppo</string>\r\n    <string name=\"description\">descrizione</string>\r\n    <string name=\"group_create\">Creazione del gruppo avvenuta con successo</string>\r\n    <string name=\"friends_aggiunti\">Richieste di invito al gruppo inviate</string>\r\n\r\n    //activity_eventi_partecipato_positivo\r\n    <string name=\"end\">fine</string>\r\n\r\n    //activity_invita_amici_gruppo\r\n    <string name=\"invite_friend_to_group\">invita i tuoi amici al gruppo</string>\r\n    <string name=\"stop\">termina</string>\r\n\r\n    //activity_modifica_dati_utente\r\n    <string name=\"modify_data\">modifica dati</string>\r\n    <string name=\"name\">nome</string>\r\n    <string name=\"surname\">cognome</string>\r\n    <string name=\"gender\">genere</string>\r\n    <string name=\"residency\">residenza</string>\r\n    <string name=\"region\">regione</string>\r\n    <string name=\"province\">provincia</string>\r\n    <string name=\"city\">città</string>\r\n    <string name=\"save\">salva modifiche</string>\r\n\r\n    //activity_profilo_utenti\r\n    <string name=\"add_to_friends\">aggiungi agli amici</string>\r\n    <string name=\"birth2dots\">Data di nascita: </string>\r\n    <string name=\"age2dots\">Età: </string>\r\n    <string name=\"gender2dots\">Genere: </string>\r\n    <string name=\"residency2dots\">Residenza: </string>\r\n\r\n    //activity_registration\r\n    <string name=\"take_profile_picture\">scatta foto profilo</string>\r\n    <string name=\"upload_profile_picture\">carica foto profilo</string>\r\n\r\n    //activity_segnala_negatività\r\n    <string name=\"date_of_negativity\">data negatività</string>\r\n    <string name=\"upload_image\">carica immagine</string>\r\n    <string name=\"upload_pdf\">carica pdf</string>\r\n    <string name=\"report\">completa la segnalazione</string>\r\n    <string name=\"enter_date\">Inserisci la data</string>\r\n    <string name=\"data_successiva\">Data inserita successiva a quella di oggi</string>\r\n    <string name=\"molto_tempo\">E trascorso molto tempo</string>\r\n    <string name=\"giorni10_pos\">Devono essere trascorsi almeno 10 giorni dalla positività</string>\r\n\r\n    //activity_segnala_positività\r\n    <string name=\"date_of_positivity\">data positività</string>\r\n\r\n\r\n    //fragment_events\r\n    <string name=\"participating\">Eventi a cui sono iscritto</string>\r\n    <string name=\"created_by_me\">Eventi creati da me</string>\r\n\r\n    //fragment_friends\r\n    <string name=\"your_friends\">i tuoi amici</string>\r\n\r\n    //fragment_new_events\r\n    <string name=\"event_name\">Nome dell\\'evento</string>\r\n    <string name=\"maximum_number_of_participants\">Numero massimo di partecipanti</string>\r\n    <string name=\"event_date2dots\">Data evento:</string>\r\n    <string name=\"event_date\">Data evento</string>\r\n    <string name=\"event_time2dots\">Orario evento</string>\r\n    <string name=\"event_time\">Orario evento</string>\r\n    <string name=\"event_description\">Descrizione evento</string>\r\n    <string name=\"event_address\">Indirizzo evento</string>\r\n\r\n    //fragment_profilo_evento\r\n    <string name=\"number_of_participants\">Numero di partecipanti all\\'evento </string>\r\n    <string name=\"available_places\">Posti disponibili </string>\r\n\r\n    <plurals name=\"nPlacesAvailable\">\r\n        <item quantity=\"one\">%d posto disponibile</item>\r\n        <item quantity=\"other\">%d posti disponibili</item>\r\n    </plurals>\r\n\r\n\r\n    <string name=\"partecipate\">partecipa </string>\r\n    <string name=\"partecipate_as_a_group\">partecipa come gruppo </string>\r\n\r\n    //fragment_profilo_evento_admin\r\n    <string name=\"modify_event\">Modifica evento </string>\r\n    <string name=\"delete_event\">Elimina evento </string>\r\n\r\n    //fragment_profilo_gruppo\r\n    <string name=\"exit_group\">Abbandona gruppo </string>\r\n\r\n    //fragment_profilo_gruppo_admin\r\n    <string name=\"group_state\">Stato del gruppo </string>\r\n    <string name=\"invite_friends\">Invita amici </string>\r\n    <string name=\"modify_group\">Modifica gruppo </string>\r\n    <string name=\"delete_group\">Elimina gruppo </string>\r\n\r\n    //fragment_profilo_partecipante\r\n    <string name=\"name_and_surname\">Nome Cognome </string>\r\n\r\n    //fragment_rimuovi_partecipazione\r\n    <string name=\"cancel_participation\">Annulla partecipazione </string>\r\n\r\n    //item_annulla_partecipazione_evento\r\n    <string name=\"red_state_participation\">Il tuo stato è rosso/arancione\\nNon puoi più partecipare a questo evento</string>\r\n\r\n    //item_invito\r\n    <string name=\"invite_from_group\">Hai ricevuto un invito da questo gruppo:</string>\r\n    <string name=\"accept\">Accetta</string>\r\n    <string name=\"delete\">Elimina</string>\r\n    <string name=\"participant\">Partecipanti</string>\r\n\r\n    //item_partecipato_evento\r\n    <string name=\"did_you_participate_event\">Hai partecipato a questo evento?</string>\r\n    <string name=\"date\">Data</string>\r\n    <string name=\"yes\">Sì</string>\r\n    <string name=\"no\">No</string>\r\n\r\n    //item_promemoria_evento\r\n    <string name=\"reminder\">Promemoria</string>\r\n    <string name=\"you_will_participate_event\">Parteciperai a questo evento</string>\r\n\r\n    //item_richiesta\r\n    <string name=\"friend_request\">Hai ricevuto una richesta d\\'amicizia da:</string>\r\n\r\n    //partecipante_row\r\n    <string name=\"years\">Anni</string>\r\n\r\n    //bottom_navigation\r\n    <string name=\"groups\">Gruppi</string>\r\n    <string name=\"friends\">Amici</string>\r\n    <string name=\"notifications\">Notifiche</string>\r\n    <string name=\"events\">Eventi</string>\r\n\r\n    //Shared message\r\n    <string name=\"subMessage1\">Iscriviti subito all\\'evento di ContagiApp\\n \\'\\'</string>\r\n    <string name=\"subMessage2\">\\'\\' \\n che si terrà in:\\n</string>\r\n    <string name=\"separator\">\", \"</string>\r\n    <string name=\"subMessage3\">\\n\\nEffettua subito la prenotazione sull\\'app.\"</string>\r\n    <string name=\"ERROR\">ERRORE</string>\r\n\r\n    //ProfiloActivity\r\n    <string name=\"positive\">POSITIVO </string>\r\n    <string name=\"negative\">NEGATIVO </string>\r\n    <string name=\"uncertain\">INCERTO </string>\r\n    <string name=\"contact_with_a_positive\">contatto con un POSITIVO </string>\r\n    <string name=\"state2dots\">Stato: </string>\r\n    <string name=\"name2dots\">Nome: </string>\r\n    <string name=\"surname2dots\">Cognome: </string>\r\n    <string name=\"mail2dots\">Mail: </string>\r\n    <string name=\"date_of_birth2dots\">Data di nascita: </string>\r\n    <string name=\"country_of_residence2dots\">Nazione di residenza: </string>\r\n    <string name=\"region_of_residence2dots\">Regione di residenza: </string>\r\n    <string name=\"province_of_residence2dots\">Provincia di residenza: </string>\r\n    <string name=\"city_of_residence2dots\">Città di residenza: </string>\r\n    <string name=\"phone2dots\">Cellulare: </string>\r\n\r\n\r\n    //ProfiloGruppoFragment\r\n    <string name=\"are_you_sure_you_want_to_quit\">Sei sicuro di voler abbandonare il gruppo?</string>\r\n\r\n    //GroupFragment\r\n    <string name=\"no_group_msg\">Non hai ancora nessun gruppo. Crea subito uno</string>\r\n\r\n    //FriendFragment\r\n    <string name=\"you_dont_have_any_friends_yet\">Non hai ancora nessun amico</string>\r\n\r\n    //EventsFragment\r\n    <string name=\"impossible_operation\">Impossibile effettuare questa operazione</string>\r\n\r\n    //NewEventsActivity\r\n    <string name=\"fill_in_all_fields\">Inserisci tutti i campi</string>\r\n    <string name=\"enter_event_name\">Inserisci il nome dell\\'evento</string>\r\n    <string name=\"enter_group_description\">Inserisci la descrizione del gruppo</string>\r\n    <string name=\"enter_event_description\">Inserisci la descrizione</string>\r\n    <string name=\"enter_event_city\">Inserisci la città</string>\r\n    <string name=\"enter_event_address\">Inserisci l\\'indirizzo</string>\r\n    <string name=\"enter_event_max_participants_number\">Inserisci il numero massimo dei partecipanti</string>\r\n    <string name=\"enter_group_name\">Inserisci il nome del gruppo</string>\r\n    <string name=\"loading\">Caricamento</string>\r\n    <string name=\"image_uploaded\">Immagine caricata</string>\r\n    <string name=\"image_not_uploaded\">Immagine not caricata</string>\r\n\r\n    //PartecipazioneGruppoFragment\r\n    <string name=\"registration_completed\">Iscrizione effettuata</string>\r\n    <string name=\"group_already_registered\">Questo tuo gruppo è già prenotato all\\'evento</string>\r\n    <string name=\"groups_you_created_exceed_maximum\">I gruppi da te creati eccedono il numero massimo di partecipanti dell\\'evento</string>\r\n\r\n    //ProfiloPartecipanteFragment\r\n    <string name=\"are_you_sure_you_want_to_remove_the_reservation\">Sicuro di rimuovere la prenotazione?</string>\r\n\r\n\r\n    //EventiPartecipatoAdapter\r\n    <string name=\"take_part\">Partecipato</string>\r\n    <string name=\"did_not_partecipated\">Non ho partecipato</string>\r\n\r\n    //SegnalaNegativita\r\n    <string name=\"enter_date_and_certificate\">Inserisci data e/o certificato</string>\r\n\r\n    <string name=\"accepted\">Accettato</string>\r\n    <string name=\"declined\">Rifiutato</string>\r\n\r\n</resources>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/app/src/main/res/values/strings.xml	(date 1635964916476)
@@ -177,6 +177,7 @@
     <string name="event_time">Orario evento</string>
     <string name="event_description">Descrizione evento</string>
     <string name="event_address">Indirizzo evento</string>
+    <string name="modifica_evento">Modifica evento</string>
 
     //fragment_profilo_evento
     <string name="number_of_participants">Numero di partecipanti all\'evento </string>
@@ -289,6 +290,8 @@
     <string name="loading">Caricamento</string>
     <string name="image_uploaded">Immagine caricata</string>
     <string name="image_not_uploaded">Immagine not caricata</string>
+    <string name="inserisci_regione">Inserisci regione</string>
+    <string name="inserisci_provincia">Inserisci provincia</string>
 
     //PartecipazioneGruppoFragment
     <string name="registration_completed">Iscrizione effettuata</string>
Index: app/src/main/java/com/batsoftware/contagiapp/registrazione/RegistrationActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.batsoftware.contagiapp.registrazione;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.provider.MediaStore;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.AutoCompleteTextView;\r\nimport android.widget.Button;\r\nimport android.widget.DatePicker;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.FileProvider;\r\n\r\nimport com.batsoftware.contagiapp.BuildConfig;\r\nimport dizionarioPerCitta.Cities;\r\nimport com.batsoftware.contagiapp.MainActivity;\r\nimport com.batsoftware.contagiapp.R;\r\n\r\nimport dizionarioPerCitta.Province;\r\nimport dizionarioPerCitta.Regions;\r\nimport com.batsoftware.contagiapp.utente.Utente;\r\nimport com.google.android.gms.tasks.OnCanceledListener;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.button.MaterialButton;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.OnProgressListener;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.google.gson.Gson;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport org.jetbrains.annotations.NotNull;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Objects;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\npublic class RegistrationActivity extends AppCompatActivity {\r\n\r\n    private DatePickerDialog.OnDateSetListener dataDiNascita;\r\n    private static final String TAG = \"RegistrationActivity\";\r\n    // Access a Cloud Firestore instance from your Activity\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    FirebaseStorage storage;\r\n    StorageReference storageReference;\r\n    private Uri filePath;\r\n\r\n    private int anno = 0, mese = 0, giorno = 0;\r\n    //Per gli errori\r\n    private TextInputLayout nomeLayout;\r\n    private TextInputLayout cognomeLayout;\r\n    private TextInputLayout phoneLayout;\r\n    private TextInputLayout mailLayout;\r\n    private TextInputLayout dataLayout;\r\n    private TextInputLayout psw1Layout;\r\n    private TextInputLayout psw2Layout;\r\n\r\n    private TextInputEditText nome;\r\n    private TextInputEditText cognome;\r\n    private TextInputEditText phone;\r\n    private TextInputEditText mail;\r\n    private TextInputEditText data;\r\n    private TextInputEditText psw1;\r\n    private TextInputEditText psw2;\r\n\r\n    private AutoCompleteTextView autoCompleteRegion;\r\n    private AutoCompleteTextView autoCompleteProvincia;\r\n    private AutoCompleteTextView autoCompleteCity;\r\n    private TextInputLayout layoutRegion;\r\n    private TextInputLayout layoutProvince;\r\n    private TextInputLayout layoutCity;\r\n\r\n    //per la foto\r\n    static final int REQUEST_IMAGE_CAPTURE = 0;\r\n    private ImageView immagine;\r\n    String imageFileName;\r\n    static String currentPhotoPath;\r\n    private Utente utente = new Utente();\r\n    private ArrayList<String> friends = new ArrayList<String>();\r\n    private ArrayList<String> richieste = new ArrayList<String>();\r\n    private ArrayList<String> inviti = new ArrayList<String>();\r\n\r\n    String regioneSelezionata = null;\r\n    String provinciaSelezionata = null;\r\n    String cittaSelezionata = null;\r\n    ArrayAdapter<String> adapterProvincia = null;\r\n    ArrayAdapter<String> adapterCitta = null;\r\n\r\n\r\n    //per importare immagini\r\n    private static final int PICK_IMAGE = 1;\r\n    private Uri imageUri;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {//TODO controllare tutto il codice\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_registration);\r\n        immagine = findViewById(R.id.propic);\r\n        storage = FirebaseStorage.getInstance();\r\n        storageReference = storage.getReferenceFromUrl(\"gs://contagiapp-c5306.appspot.com/\");\r\n\r\n\r\n        nome = (TextInputEditText) findViewById(R.id.editTextName);\r\n        cognome = (TextInputEditText) findViewById(R.id.editTextSurname);\r\n        phone = (TextInputEditText) findViewById(R.id.editTextPhone);\r\n        data = (TextInputEditText) findViewById(R.id.editTextDataNascita);\r\n        mail = (TextInputEditText) findViewById(R.id.editTextTextEmailAddress);\r\n        psw1 = (TextInputEditText) findViewById(R.id.editTextTextPassword);\r\n        psw2 = (TextInputEditText) findViewById(R.id.editTextRepeatPassword);\r\n\r\n        nomeLayout = (TextInputLayout) findViewById(R.id.textInputNameLayout);\r\n        cognomeLayout = (TextInputLayout) findViewById(R.id.textInputSurnameLayout);\r\n        phoneLayout = (TextInputLayout) findViewById(R.id.textInputPhoneLayout);\r\n        mailLayout = (TextInputLayout) findViewById(R.id.textInputEmailLayout);\r\n        dataLayout = (TextInputLayout) findViewById(R.id.textInputBirthLayout);\r\n        psw1Layout = (TextInputLayout) findViewById(R.id.textInputPasswordLayout);\r\n        psw2Layout = (TextInputLayout) findViewById(R.id.textInputRepeatPasswordLayout);\r\n\r\n        autoCompleteRegion = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextRegione);\r\n        autoCompleteProvincia = findViewById(R.id.autoCompleteTextProvincia);\r\n        autoCompleteCity = (AutoCompleteTextView) findViewById(R.id.autoCompleteTextCitta);\r\n        layoutRegion = findViewById(R.id.textInputRegioneLayout);\r\n        layoutProvince = findViewById(R.id.textInputProvinciaLayout);\r\n        layoutCity = findViewById(R.id.textInputCittaLayout);\r\n\r\n        ArrayAdapter<String> adapterRegione = new ArrayAdapter<String>(this,\r\n                android.R.layout.simple_dropdown_item_1line, Regions.all_regions);\r\n\r\n\r\n        autoCompleteRegion.setAdapter(adapterRegione);\r\n        layoutProvince.setEnabled(false);\r\n        layoutCity.setEnabled(false);\r\n\r\n\r\n        autoCompleteRegion.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                Log.d(\"Regione selezionata\", autoCompleteRegion.getText().toString());\r\n                regioneSelezionata = autoCompleteRegion.getText().toString();\r\n                layoutProvince.setEnabled(true);\r\n                adapterProvincia = new ArrayAdapter<String>(RegistrationActivity.this,\r\n                        android.R.layout.simple_dropdown_item_1line,\r\n                        Province.map.get(autoCompleteRegion.getText().toString()));\r\n                autoCompleteProvincia.setAdapter(adapterProvincia);\r\n\r\n                autoCompleteProvincia.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                    @Override\r\n                    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                        Log.d(\"Provincia selezionata\", autoCompleteProvincia.getText().toString());\r\n                        provinciaSelezionata = autoCompleteProvincia.getText().toString();\r\n                        layoutCity.setEnabled(true);\r\n                        adapterCitta = new ArrayAdapter<String>(RegistrationActivity.this,\r\n                                android.R.layout.simple_dropdown_item_1line,\r\n                                Cities.mapPerProvincia.get(autoCompleteProvincia.getText().toString()));\r\n\r\n                        autoCompleteCity.setAdapter(adapterCitta);\r\n\r\n                        autoCompleteCity.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                            @Override\r\n                            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                                Log.d(\"Citta selezionata\", autoCompleteCity.getText().toString());\r\n                                cittaSelezionata = autoCompleteCity.getText().toString();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n\r\n        autoCompleteProvincia.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                Log.d(\"provincia\", String.valueOf(provinciaSelezionata));\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                Log.d(\"provincia\", String.valueOf(provinciaSelezionata));\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n        autoCompleteRegion.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n                Log.d(\"regione\", String.valueOf(regioneSelezionata));\r\n                layoutProvince.setEnabled(false);\r\n                autoCompleteProvincia.setText(null);\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                Log.d(\"regione\", String.valueOf(regioneSelezionata));\r\n                layoutProvince.setEnabled(false);\r\n                autoCompleteProvincia.setText(null);\r\n                layoutCity.setEnabled(false);\r\n                autoCompleteCity.setText(null);\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n        // collegamento button registrati con la mainActivity\r\n        Button signUpButton = (Button) findViewById(R.id.modificaDati);\r\n        signUpButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                \r\n                switch (controlli_TextInput(nome, nomeLayout, cognome, cognomeLayout, mail, mailLayout, data, dataLayout, phone, phoneLayout, psw1, psw1Layout, psw2, psw2Layout, layoutRegion, layoutProvince, layoutCity)) {\r\n\r\n                    case 1:\r\n                        nomeLayout.setError(\"Inserisci nome\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci nome\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 2:\r\n                        cognomeLayout.setError(\"Inserisci cognome\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci cognome\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 3:\r\n                        dataLayout.setError(\"Inserisci data di nascita\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci data di nascita\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 4:\r\n                        layoutRegion.setError(\"Inserisci regione\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci regione\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 5:\r\n                        layoutProvince.setError(\"Inserisci provincia\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci provincia\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 6:\r\n                        layoutCity.setError(\"Inserisci citta\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci citta\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n\r\n                    case 7:\r\n                        mailLayout.setError(\"Inserisci mail\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci mail\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 8:\r\n                        phoneLayout.setError(\"Inserisci cellulare\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci cellulare\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 9:\r\n                        psw1Layout.setError(\"Inserisci password\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci Password\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case 10:\r\n                        psw2Layout.setError(\"Inserisci password\");\r\n                        Toast.makeText(RegistrationActivity.this, \"Inserisci nome\", Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    default:\r\n                        addToDb();\r\n                        break;\r\n                }\r\n                //per togliere i controlli togliere il commento alla riga successiva\r\n                //addToDb();\r\n            }\r\n        });\r\n\r\n        //Date Picker\r\n        data.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Calendar cal = Calendar.getInstance();\r\n                int year = cal.get(Calendar.YEAR);\r\n                int month = cal.get(Calendar.MONTH);\r\n                int day = cal.get(Calendar.DAY_OF_MONTH);\r\n\r\n                DatePickerDialog dialog = new DatePickerDialog(\r\n                        RegistrationActivity.this,\r\n                        android.R.style.Theme_Material_InputMethod,\r\n                        dataDiNascita,\r\n                        year, month, day);\r\n                dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.LTGRAY));\r\n                dialog.show();\r\n            }\r\n        });\r\n\r\n        dataDiNascita = new DatePickerDialog.OnDateSetListener() {\r\n            @Override\r\n            public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                month++;\r\n                String date = null;\r\n                Log.d(TAG, \"onDateSet: date: \" + dayOfMonth + \"/\" + month + \"/\" + year);\r\n                if (month <= 9) {\r\n                    date = dayOfMonth + \"/0\" + month + \"/\" + year;\r\n                } else\r\n                    date = dayOfMonth + \"/\" + month + \"/\" + year;\r\n\r\n                data.setText(date);\r\n            }\r\n        };\r\n\r\n\r\n        Button scattafoto = findViewById(R.id.scattafoto);\r\n        scattafoto.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                Intent photoIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                dispatchTakePictureIntent(photoIntent);\r\n            }\r\n        });\r\n\r\n        MaterialButton addImgUser = findViewById(R.id.btnAddImgUser);\r\n        addImgUser.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openImage();\r\n            }\r\n        });\r\n\r\n\r\n        //toDo: recuperare il valore dell'autotextREGIONE e in base a quello metterci i controlli\r\n\r\n    }\r\n\r\n    private void openImage(){\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(Intent.createChooser(intent, \"Select Picture\"), PICK_IMAGE);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK) {\r\n            imageUri = data.getData();\r\n            ImageView imageView = findViewById(R.id.propic);\r\n            Picasso.get().load(imageUri).into(imageView); //mette l'immagine nell'ImageView di questa activity\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private void uploadImageToStorage(String documentId) {\r\n        final ProgressDialog pd = new ProgressDialog(this);\r\n        pd.setMessage(\"Caricamento\");\r\n        pd.show();\r\n\r\n        Log.d(\"imageUri\", String.valueOf(imageUri));\r\n        Log.d(\"documentID\", String.valueOf(documentId));\r\n\r\n        if ((imageUri != null) && (documentId != null)) {\r\n            final StorageReference fileRef = FirebaseStorage.getInstance().getReference().child(\"imgUtenti\").child(documentId);\r\n\r\n            fileRef.putFile(imageUri).addOnCompleteListener(new OnCompleteListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onComplete(@NonNull Task<UploadTask.TaskSnapshot> task) {\r\n                    fileRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                        @Override\r\n                        public void onSuccess(Uri uri) {\r\n                            String url = uri.toString();\r\n\r\n                            Log.d(\"downloadUrl\", url);\r\n                            //pd.dismiss();\r\n                            Toast.makeText(RegistrationActivity.this, \"immagine caricata\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }).addOnCanceledListener(new OnCanceledListener() {\r\n                        @Override\r\n                        public void onCanceled() {\r\n                            Toast.makeText(RegistrationActivity.this, \"immagine non caricata\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    public void clearAdapter() {\r\n        adapterCitta.clear();\r\n    }\r\n\r\n    private void dispatchTakePictureIntent(@NotNull Intent takePictureIntent) {\r\n        // Create the File where the photo should go\r\n        File photoFile = null;\r\n        try {\r\n            photoFile = createImageFile();\r\n        } catch (IOException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n        // Continue only if the File was successfully created\r\n        if (photoFile != null) {\r\n            filePath = FileProvider.getUriForFile(Objects.requireNonNull(getApplicationContext()),\r\n                    BuildConfig.APPLICATION_ID + \".provider\", photoFile);\r\n            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, filePath);\r\n            startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);\r\n        }\r\n    }\r\n\r\n    @NotNull\r\n    private File createImageFile() throws IOException {\r\n        // Create an image file name\r\n        // String timeStamp = new SimpleDateFormat(\"yyyyMMdd_HHmmss\").format(new Date());\r\n        imageFileName = \"PROPIC\";\r\n        File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n        File image = File.createTempFile(\r\n                imageFileName,  /* prefix */\r\n                \".jpg\",         /* suffix */\r\n                storageDir      /* directory */\r\n        );\r\n\r\n        // Save a file: path for use with ACTION_VIEW intents\r\n        currentPhotoPath = image.getAbsolutePath();\r\n        return image;\r\n    }\r\n\r\n    /*\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (resultCode == RESULT_OK) {\r\n            Bitmap bitmap = BitmapFactory.decodeFile(currentPhotoPath);\r\n            immagine.setImageBitmap(bitmap);\r\n            immagine.setRotation(90);\r\n        }\r\n    }\r\n     */\r\n\r\n    private void uploadImage(String mail) {\r\n\r\n        if (filePath != null) {\r\n            final ProgressDialog progressDialog = new ProgressDialog(this);\r\n            progressDialog.setTitle(\"Uploading...\");\r\n            progressDialog.show();\r\n\r\n            StorageReference ref = storageReference.child(\"files/\" + mail + \".jpg\");\r\n\r\n            ref.putFile(filePath)\r\n                    .addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            progressDialog.dismiss();\r\n                            Toast.makeText(RegistrationActivity.this, \"Uploaded\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    })\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            progressDialog.dismiss();\r\n                            Toast.makeText(RegistrationActivity.this, \"Failed \" + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    })\r\n                    .addOnProgressListener(new OnProgressListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onProgress(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            double progress = (100.0 * taskSnapshot.getBytesTransferred() / taskSnapshot\r\n                                    .getTotalByteCount());\r\n                            progressDialog.setMessage(\"Uploaded \" + (int) progress + \"%\");\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    });\r\n        }\r\n    }\r\n\r\n\r\n    private int controlli_TextInput(TextInputEditText name, TextInputLayout nomeLayout, TextInputEditText surname, TextInputLayout cognomeLayout, TextInputEditText mail, TextInputLayout mailLayout,\r\n                                    TextInputEditText birth, TextInputLayout dataLayout, TextInputEditText phone, TextInputLayout phoneLayout, TextInputEditText psw1, TextInputLayout psw1Layout,\r\n                                    TextInputEditText psw2, TextInputLayout psw2Layout, TextInputLayout regioneLayout, TextInputLayout provinciaLayout, TextInputLayout cittaLayout) {\r\n\r\n        if (isEmpty(name)) {\r\n            return 1;\r\n        } else nomeLayout.setError(null);\r\n\r\n        if (isEmpty(surname)) {\r\n            return 2;\r\n        } else cognomeLayout.setError(null);\r\n\r\n        if (isEmpty(birth)) {\r\n            return 3;\r\n        } else dataLayout.setError(null);\r\n\r\n        if (regioneSelezionata == null) {\r\n            return 4;\r\n        } else regioneLayout.setError(null);\r\n\r\n        if (provinciaSelezionata == null) {\r\n            return 5;\r\n        } else provinciaLayout.setError(null);\r\n\r\n        if (cittaSelezionata == null) {\r\n            return 6;\r\n        } else cittaLayout.setError(null);\r\n        if (isEmpty(mail)) {\r\n            return 7;\r\n        } else mailLayout.setError(null);\r\n\r\n        if (isEmpty(phone)) {\r\n            return 8;\r\n        } else phoneLayout.setError(null);\r\n\r\n        if (isEmpty(psw1)) {\r\n            return 9;\r\n        } else psw1Layout.setError(null);\r\n\r\n        if (isEmpty(psw2)) {\r\n            return 10;\r\n        } else psw2Layout.setError(null);\r\n\r\n\r\n        return 0;\r\n    }\r\n\r\n    private boolean isEmpty(TextInputEditText etText) {\r\n        return etText.getText().toString().length() <= 0;\r\n    }\r\n\r\n    public void openMainActivity() {\r\n        Intent mainIntent = new Intent(this, MainActivity.class);\r\n        startActivity(mainIntent);\r\n        finish();\r\n        finishAfterTransition();\r\n    }\r\n\r\n    public void addToDb() {\r\n        // Create a new user with a first, middle, and last name\r\n        final Map<String, Object> user = new HashMap<>();\r\n\r\n        TextInputEditText name = (TextInputEditText) findViewById(R.id.editTextName);\r\n        String nome = name.getText().toString();\r\n        user.put(\"nome\", nome);\r\n        utente.setNome(nome);\r\n\r\n\r\n        TextInputEditText surname = (TextInputEditText) findViewById(R.id.editTextSurname);\r\n        String cognome = surname.getText().toString();\r\n        user.put(\"cognome\", cognome);\r\n        utente.setCognome(cognome);\r\n\r\n        RadioGroup radiogroup = (RadioGroup) findViewById(R.id.radiogroup);\r\n        int Idselezionato = radiogroup.getCheckedRadioButtonId();\r\n        RadioButton radiosex = (RadioButton) findViewById(Idselezionato);\r\n        user.put(\"genere\", radiosex.getText().toString());\r\n        utente.setGenere(radiosex.getText().toString());\r\n\r\n        TextView date = (TextView) findViewById(R.id.editTextDataNascita);\r\n        final String appoggio = date.getText().toString();\r\n\r\n\r\n        Log.d(\"regioneSelezionata2\", regioneSelezionata);\r\n        Log.d(\"cittaSelezionata2\", cittaSelezionata);\r\n\r\n        user.put(\"regione\", regioneSelezionata);\r\n        utente.setRegione(regioneSelezionata);\r\n        user.put(\"province\", provinciaSelezionata);\r\n        utente.setProvince(provinciaSelezionata);\r\n        user.put(\"citta\", cittaSelezionata);\r\n        utente.setCitta(cittaSelezionata);\r\n\r\n\r\n        EditText telefono = (EditText) findViewById(R.id.editTextPhone);\r\n        user.put(\"telefono\", telefono.getText().toString());\r\n        utente.setTelefono(telefono.getText().toString());\r\n\r\n        EditText password = (EditText) findViewById(R.id.editTextTextPassword);\r\n        final String psw1 = password.getText().toString();\r\n\r\n        EditText password2 = (EditText) findViewById(R.id.editTextRepeatPassword);\r\n        final String psw2 = password2.getText().toString();\r\n\r\n        EditText mail = (EditText) findViewById(R.id.editTextTextEmailAddress);\r\n        final String email = mail.getText().toString();\r\n\r\n\r\n        db.collection(\"Utenti\").whereEqualTo(\"mail\", email).get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot querySnapshots) {\r\n                        controlli(querySnapshots.isEmpty(), user, email, psw1, psw2, appoggio);\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    private void controlli(boolean cond, Map<String, Object> user1, String email, String psw1, String psw2, String appoggio) {\r\n        Calendar cal = Calendar.getInstance();\r\n        int l = appoggio.length();\r\n        boolean conddata = false;\r\n        boolean condemail = false;\r\n        switch (l) {\r\n            case 9:\r\n                anno = Integer.valueOf(appoggio.substring(l - 4, l));\r\n                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));\r\n                giorno = Integer.valueOf(appoggio.charAt(0)) - 48;\r\n                break;\r\n            case 10:\r\n                anno = Integer.valueOf(appoggio.substring(l - 4, l));\r\n                mese = Integer.valueOf(appoggio.substring(l - 7, l - 5));\r\n                giorno = Integer.valueOf(appoggio.substring(l - 10, l - 8));\r\n                break;\r\n        }\r\n\r\n        if (anno == (cal.get(Calendar.YEAR) - 14)) {\r\n            if (mese == cal.get(Calendar.MONTH)) {\r\n                if (giorno > cal.get(Calendar.DAY_OF_MONTH)) conddata = true;\r\n            } else if (mese > cal.get(Calendar.DAY_OF_MONTH)) conddata = true;\r\n        } else if (anno > (cal.get(Calendar.YEAR) - 14)) conddata = true;\r\n\r\n\r\n        if (!email.isEmpty()) {\r\n            Pattern p = Pattern.compile(\".+@.+\\\\.[a-z]+\", Pattern.CASE_INSENSITIVE);\r\n            Matcher m = p.matcher(email);\r\n            boolean matchFound = m.matches();\r\n\r\n            String expressionPlus = \"^[\\\\w\\\\-]([\\\\.\\\\w])+[\\\\w]+@([\\\\w\\\\-]+\\\\.)+[A-Z]{2,4}$\";\r\n            Pattern pPlus = Pattern.compile(expressionPlus, Pattern.CASE_INSENSITIVE);\r\n            Matcher mPlus = pPlus.matcher(email);\r\n            boolean matchFoundPlus = mPlus.matches();\r\n            condemail = (matchFound && matchFoundPlus);\r\n        }\r\n\r\n\r\n        if (!condemail) {\r\n            Toast.makeText(this, \"formato email non valido\", Toast.LENGTH_SHORT).show();\r\n            mailLayout.setError(\"Formato email non valido\");\r\n        } else {\r\n            if (conddata && condemail) {\r\n                Toast.makeText(this, \"Bisogna avere almeno 14 anni per iscriversi\", Toast.LENGTH_SHORT).show();\r\n                dataLayout.setError(\"Bisogna avere almeno 14 anni per iscriversi\");\r\n            } else {\r\n                user1.put(\"dataNascita\", appoggio);\r\n                utente.setDataNascita(appoggio);\r\n\r\n                if (!(psw1.equals(psw2))) {\r\n                    Toast.makeText(this, \"Le password coincidono\", Toast.LENGTH_SHORT).show();\r\n                    psw1Layout.setError(\"Le password coincidono\");\r\n                    psw2Layout.setError(\"Le password coincidono\");\r\n                } else {\r\n                    if (cond) {\r\n                        psw1Layout.setError(null);\r\n                        psw2Layout.setError(null);\r\n                        user1.put(\"password\", psw1);\r\n                        user1.put(\"mail\", email);\r\n                        user1.put(\"mailPath\", email);\r\n                        utente.setPassword(psw1);\r\n                        utente.setMail(email);\r\n                        utente.setAmici(friends);\r\n                        utente.setRichiesteRicevute(richieste);\r\n                        utente.setInvitiRicevuti(inviti);\r\n                        utente.setStato(\"giallo\");\r\n                        user1.put(\"stato\", \"giallo\");\r\n                        user1.put(\"amici\", friends);\r\n                        user1.put(\"richiesteRicevute\", richieste);\r\n                        user1.put(\"invitiRicevuti\", inviti);\r\n                        utente.setDataPositivita(null);\r\n                        utente.setDataNegativita(null);\r\n                        user1.put(\"dataNegativita\", null);\r\n                        user1.put(\"dataPositivita\", null);\r\n\r\n                        db.collection(\"Utenti\").document(email).set(user1);\r\n\r\n\r\n                        uploadImageToStorage(utente.getMailPath());\r\n                        SharedPreferences prefs = getApplicationContext().getSharedPreferences(\"Login\", MODE_PRIVATE);\r\n                        SharedPreferences.Editor editor = prefs.edit();\r\n                        Gson gson = new Gson();\r\n                        String json = gson.toJson(utente);\r\n                        editor.putString(\"utente\", json);\r\n                        editor.apply();\r\n\r\n\r\n                        openMainActivity();\r\n                        finish();\r\n                    } else {\r\n                        Toast.makeText(this, \"Mail già esistente\", Toast.LENGTH_SHORT).show();\r\n                        mailLayout.setError(\"Mail già esistente\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/batsoftware/contagiapp/registrazione/RegistrationActivity.java b/app/src/main/java/com/batsoftware/contagiapp/registrazione/RegistrationActivity.java
--- a/app/src/main/java/com/batsoftware/contagiapp/registrazione/RegistrationActivity.java	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/app/src/main/java/com/batsoftware/contagiapp/registrazione/RegistrationActivity.java	(date 1635963694664)
@@ -125,7 +125,7 @@
     private Uri imageUri;
 
     @Override
-    protected void onCreate(Bundle savedInstanceState) {//TODO controllare tutto il codice
+    protected void onCreate(Bundle savedInstanceState) {//TODO controllare tutto il codice + controlli su autocomplete
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_registration);
         immagine = findViewById(R.id.propic);
Index: app/src/main/res/values-en/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<resources>\r\n    <string name=\"app_name\">ContagiApp</string>\r\n    <string name=\"home\">Home</string>\r\n\r\n    <!--Campi di registrazione-->\r\n    <string name=\"birth\">Date of birth</string>\r\n\r\n\r\n    <string name=\"login\">Login</string>\r\n    <string name=\"signUp\">Sign Up</string>\r\n    <string name=\"prompt_email\">Email</string>\r\n    <string name=\"prompt_password\">Password</string>\r\n    <string name=\"repeat_password\">Repeat Password</string>\r\n    <string name=\"action_sign_in_short\">Sign in</string>\r\n    <string name=\"welcome\">\"Welcome !\"</string>\r\n    <string name=\"invalid_username\">Not a valid username</string>\r\n    <string name=\"invalid_password\">Password must be >5 characters</string>\r\n    <string name=\"login_failed\">\"Login failed\"</string>\r\n    <string name=\"phone\">Phone number</string>\r\n    <string name=\"search\">Search</string>\r\n    <string name=\"invite\">Invite</string>\r\n    <string name=\"participants\"> participants</string>\r\n\r\n    <plurals name=\"nPartecipants\">\r\n        <item quantity=\"one\">%d partecipant</item>\r\n        <item quantity=\"other\">%d partecipants</item>\r\n    </plurals>\r\n\r\n\r\n\r\n\r\n    <string name=\"available\"> places available</string>\r\n    <plurals name=\"nPlacesAvailable\">\r\n        <item quantity=\"one\">%d place available</item>\r\n        <item quantity=\"other\">%d places available</item>\r\n    </plurals>\r\n\r\n\r\n\r\n    <string name=\"VuotoEventi\">You have not attended any event in the past. Click on finish to complete the operation</string>\r\n\r\n    <string name=\"remember_me\">Remember me</string>\r\n    <string name=\"createAccount\">Create account</string>\r\n\r\n    <string name=\"EventoEliminato\">Event deleted</string>\r\n\r\n    //Nomi AppBar\r\n    <string name=\"settings\">Settings</string>\r\n\r\n    //bottoni in impostazioni\r\n    <string name=\"SegnalaPositività\">Report positivity</string>\r\n    <string name=\"SegnalaNegatività\">Report negativity</string>\r\n    <string name=\"DarkTheme\">Dark Theme</string>\r\n    <string name=\"Notifiche\">Notifications</string>\r\n    <string name=\"InformativaPrivacy\">Information and privacy</string>\r\n\r\n    <string-array name=\"nazioni\">\r\n        <item>Italy</item>\r\n        <item>France</item>\r\n        <item>Spain</item>\r\n        <item>Germany</item>\r\n    </string-array>\r\n\r\n\r\n    <string name=\"rimuovi_partecipante\">Remove participant</string>\r\n\r\n    <string name=\"operazione_eseguita\">Operation performed</string>\r\n\r\n\r\n\r\n\r\n    //Descrizione stati\r\n    <string name=\"DescrStatoGiallo\">The yellow status indicates that there has been no contact with positive people</string>\r\n    <string name=\"DescrStatoVerde\">The green status indicates that the user is negative for the swab performed</string>\r\n    <string name=\"DescrStatoArancione\">The orange status indicates that there has been contact with positive people</string>\r\n    <string name=\"DescrStatoRosso\">Red status indicates positive for COVID-19</string>\r\n\r\n    //HomeFragment\r\n    <string name=\"your_state\">Your state</string>\r\n    <string name=\"where_do_you_want_to_go\">Where do you want to go?</string>\r\n    <string name=\"search_for_available_events\">Search for available events or create a new one</string>\r\n    <string name=\"search_event\">Search event</string>\r\n    <string name=\"create_event\">Create event</string>\r\n\r\n\r\n    //GroupFragment\r\n    <string name=\"your_create_groups\">Your groups</string>\r\n    <string name=\"your_groups_partecipante\">Groups you participate in</string>\r\n\r\n    //addFriends\r\n    <string name=\"select_user\">Select user</string>\r\n\r\n    //addImgGruppo\r\n    <string name=\"add_cover_img\">Add a cover image</string>\r\n    <string name=\"cover_img\">cover image</string>\r\n    <string name=\"descr_add_cover_img\">Give people an idea of what your group is about with a photo.</string>\r\n    <string name=\"upload_cover_img\">Upload cover image</string>\r\n    <string name=\"next\">Next</string>\r\n\r\n\r\n    //activity_crea_gruppo\r\n    <string name=\"group_name\">group name</string>\r\n    <string name=\"description\">description</string>\r\n    <string name=\"group_create\">Group creation was successful</string>\r\n    <string name=\"friends_aggiunti\">Group invitation requests sent</string>\r\n\r\n    //activity_eventi_partecipato_positivo\r\n    <string name=\"end\">end</string>\r\n\r\n    //activity_invita_amici_gruppo\r\n    <string name=\"invite_friend_to_group\">invite your friends to the group</string>\r\n    <string name=\"stop\">stop</string>\r\n\r\n    //activity_modifica_dati_utente\r\n    <string name=\"modify_data\">modify your data</string>\r\n    <string name=\"name\">name</string>\r\n    <string name=\"surname\">surname</string>\r\n    <string name=\"gender\">gender</string>\r\n    <string name=\"residency\">residency</string>\r\n    <string name=\"region\">region</string>\r\n    <string name=\"province\">province</string>\r\n    <string name=\"city\">city</string>\r\n    <string name=\"save\">save</string>\r\n\r\n    //activity_profilo_utenti\r\n    <string name=\"add_to_friends\">add to friends</string>\r\n    <string name=\"birth2dots\">Date of birth</string>\r\n    <string name=\"age2dots\">Age:</string>\r\n    <string name=\"gender2dots\">Gender:</string>\r\n    <string name=\"residency2dots\">Residency:</string>\r\n\r\n    //activity_registration\r\n    <string name=\"take_profile_picture\">take profile picture</string>\r\n    <string name=\"upload_profile_picture\">upload profile picture</string>\r\n\r\n    //activity_segnala_negatività\r\n    <string name=\"date_of_negativity\">negativity date</string>\r\n    <string name=\"upload_image\">upload image</string>\r\n    <string name=\"upload_pdf\">upload pdf</string>\r\n    <string name=\"report\">report</string>\r\n    <string name=\"enter_date\">enter the date</string>\r\n    <string name=\"data_successiva\">Date entered later than today</string>\r\n    <string name=\"molto_tempo\">It is been a long time</string>\r\n    <string name=\"giorni10_pos\">At least 10 days must have elapsed from positivity</string>\r\n\r\n\r\n    //activity_segnala_positività\r\n    <string name=\"date_of_positivity\">positivity date</string>\r\n\r\n    //fragment_events\r\n    <string name=\"participating\">Events I\\'ve subscribed to</string>\r\n    <string name=\"created_by_me\">Events created by me</string>\r\n\r\n    //fragment_friends\r\n    <string name=\"your_friends\">your friends</string>\r\n\r\n    //fragment_new_events\r\n    <string name=\"event_name\">Event name</string>\r\n    <string name=\"maximum_number_of_participants\">Maximum number of participants</string>\r\n    <string name=\"event_date2dots\">Event date:</string>\r\n    <string name=\"event_date\">Event date</string>\r\n    <string name=\"event_time2dots\">Event time</string>\r\n    <string name=\"event_time\">Event time</string>\r\n    <string name=\"event_description\">Event description</string>\r\n    <string name=\"event_address\">Event address</string>\r\n\r\n    //fragment_profilo_evento\r\n    <string name=\"number_of_participants\">Number of participants at the event</string>\r\n    <string name=\"available_places\">Available places </string>\r\n    <string name=\"partecipate\">participate </string>\r\n    <string name=\"partecipate_as_a_group\">participate as a group </string>\r\n\r\n    //fragment_profilo_evento_admin\r\n    <string name=\"modify_event\">Modify event </string>\r\n    <string name=\"delete_event\">Delete event </string>\r\n\r\n    //fragment_profilo_gruppo\r\n    <string name=\"exit_group\">Exit group </string>\r\n\r\n    //fragment_profilo_gruppo_admin\r\n    <string name=\"group_state\">Group state </string>\r\n    <string name=\"invite_friends\">Invite friends </string>\r\n    <string name=\"modify_group\">Modify group</string>\r\n    <string name=\"delete_group\">Delete group </string>\r\n\r\n    //fragment_profilo_partecipante\r\n    <string name=\"name_and_surname\">Name Surname </string>\r\n\r\n\r\n    //fragment_rimuovi_partecipazione\r\n    <string name=\"cancel_participation\">Cancel participation </string>\r\n\r\n    //item_annulla_partecipazione_evento\r\n    <string name=\"red_state_participation\">Your state is red/orange\\nYou can\\'t participate at this event</string>\r\n\r\n    //item_invito\r\n    <string name=\"invite_from_group\">You received an invite from this group:</string>\r\n    <string name=\"accept\">Accept</string>\r\n    <string name=\"delete\">Delete</string>\r\n    <string name=\"participant\">Participants</string>\r\n\r\n    //item_partecipato_evento\r\n    <string name=\"did_you_participate_event\">Did you participate at this event?</string>\r\n    <string name=\"date\">Date</string>\r\n    <string name=\"yes\">Yes</string>\r\n    <string name=\"no\">No</string>\r\n\r\n    //item_promemoria_evento\r\n    <string name=\"reminder\">Reminder</string>\r\n    <string name=\"you_will_participate_event\">You will participate at this event</string>\r\n\r\n\r\n    //item_richiesta\r\n    <string name=\"friend_request\">You received a friend request by:</string>\r\n\r\n    //partecipante_row\r\n    <string name=\"years\">years</string>\r\n\r\n    //bottom_navigation\r\n    <string name=\"groups\">Groups</string>\r\n    <string name=\"friends\">Friends</string>\r\n    <string name=\"notifications\">Notifications</string>\r\n    <string name=\"events\">Events</string>\r\n\r\n\r\n    //Shared message\r\n    <string name=\"subMessage1\">Register now for the ContagiApp event \\'\\'</string>\r\n    <string name=\"subMessage2\">\\'\\' \\nto be held in:\\n</string>\r\n    <string name=\"separator\">\", \"</string>\r\n    <string name=\"subMessage3\">\\n\\nMake your reservation on the app now.\"</string>\r\n    <string name=\"ERROR\">ERROR</string>\r\n\r\n    //ProfiloActivity\r\n    <string name=\"positive\">POSITIVE </string>\r\n    <string name=\"negative\">NEGATIVE </string>\r\n    <string name=\"uncertain\">UNCERTAIN </string>\r\n    <string name=\"contact_with_a_positive\">contact with a POSITIVE </string>\r\n    <string name=\"state2dots\">State: </string>\r\n    <string name=\"name2dots\">Name: </string>\r\n    <string name=\"surname2dots\">Surname: </string>\r\n    <string name=\"mail2dots\">Mail: </string>\r\n    <string name=\"date_of_birth2dots\">Date of birth: </string>\r\n    <string name=\"country_of_residence2dots\">Country of residence: </string>\r\n    <string name=\"region_of_residence2dots\">Region of residence: </string>\r\n    <string name=\"province_of_residence2dots\">Province of residence: </string>\r\n    <string name=\"city_of_residence2dots\">City of residence: </string>\r\n    <string name=\"phone2dots\">Phone number: </string>\r\n\r\n    //GroupFragment\r\n    <string name=\"no_group_msg\">\"You're not part of any group. Create one now\"</string>\r\n\r\n    //ProfiloGruppoFragment\r\n    <string name=\"are_you_sure_you_want_to_quit\">Are you sure you want to exit the group?</string>\r\n\r\n    //FriendFragment\r\n    <string name=\"you_dont_have_any_friends_yet\">You still don\\'t have any friend</string>\r\n\r\n    //EventsFragment\r\n    <string name=\"impossible_operation\">Unable to do this operation</string>\r\n\r\n    //NewEventsActivity\r\n    <string name=\"fill_in_all_fields\">Fill in all fields</string>\r\n    <string name=\"enter_event_name\">Enter event name</string>\r\n    <string name=\"enter_group_description\">Enter group description</string>\r\n    <string name=\"enter_event_description\">Enter description</string>\r\n    <string name=\"enter_event_city\">Enter city</string>\r\n    <string name=\"enter_event_address\">Enter address</string>\r\n    <string name=\"enter_event_max_participants_number\">Enter maximum number of participants</string>\r\n    <string name=\"enter_group_name\">Enter group name</string>\r\n    <string name=\"loading\">Upoading</string>\r\n    <string name=\"image_uploaded\">Image uploaded</string>\r\n    <string name=\"image_not_uploaded\">Image not uploaded</string>\r\n\r\n    //PartecipazioneGruppoFragment\r\n    <string name=\"registration_completed\">Registration completed</string>\r\n    <string name=\"group_already_registered\">Group already registered to the event</string>\r\n    <string name=\"groups_you_created_exceed_maximum\">The group you created exceed the maximum number of participants at the event</string>\r\n\r\n\r\n    //ProfiloPartecipanteFragment\r\n    <string name=\"are_you_sure_you_want_to_remove_the_reservation\">Are you sure you want to remove the reservation?</string>\r\n\r\n    //EventiPartecipatoAdapter\r\n    <string name=\"did_not_partecipated\">Haven\\'t taken part</string>\r\n    <string name=\"take_part\">Have taken part</string>\r\n\r\n    //SegnalaNegativita\r\n    <string name=\"enter_date_and_certificate\">Enter date and/or certificate</string>\r\n\r\n    <string name=\"accepted\">Accepted</string>\r\n    <string name=\"declined\">Declined</string>\r\n\r\n\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values-en/strings.xml b/app/src/main/res/values-en/strings.xml
--- a/app/src/main/res/values-en/strings.xml	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/app/src/main/res/values-en/strings.xml	(date 1635964984221)
@@ -164,6 +164,7 @@
     <string name="event_time">Event time</string>
     <string name="event_description">Event description</string>
     <string name="event_address">Event address</string>
+    <string name="modifica_evento">Edit event</string>
 
     //fragment_profilo_evento
     <string name="number_of_participants">Number of participants at the event</string>
@@ -271,6 +272,8 @@
     <string name="loading">Upoading</string>
     <string name="image_uploaded">Image uploaded</string>
     <string name="image_not_uploaded">Image not uploaded</string>
+    <string name="inserisci_regione">Enter region</string>
+    <string name="inserisci_provincia">Enter province</string>
 
     //PartecipazioneGruppoFragment
     <string name="registration_completed">Registration completed</string>
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    \r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        \r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.2.2'\r\n        classpath 'com.google.gms:google-services:4.3.5'\r\n\r\n\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\n\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        maven { url 'https://jitpack.io' }\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/build.gradle b/build.gradle
--- a/build.gradle	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/build.gradle	(date 1635963694677)
@@ -8,7 +8,7 @@
         
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:4.2.2'
+        classpath 'com.android.tools.build:gradle:7.0.3'
         classpath 'com.google.gms:google-services:4.3.5'
 
 
Index: gradle/wrapper/gradle-wrapper.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>#Wed Nov 03 00:26:58 CET 2021\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.7.1-bin.zip\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
--- a/gradle/wrapper/gradle-wrapper.properties	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/gradle/wrapper/gradle-wrapper.properties	(date 1635963694736)
@@ -1,6 +1,6 @@
-#Wed Nov 03 00:26:58 CET 2021
+#Wed Nov 03 12:27:35 CET 2021
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-6.7.1-bin.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-7.0.2-all.zip
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout-land/activity_login.xml\" value=\"0.21516754850088182\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_add_friends.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_add_img_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_crea_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_eventi_partecipato_positivo.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_invita_amici_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_launch_screen.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_login.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_main.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_modifica_dati_utente.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_profilo.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_profilo_utenti.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_registration.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_segnala_negativita.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_segnala_positivita.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_setting.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/activity_welcome.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/add_user_row.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_events.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_friends.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_group.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_home.xml\" value=\"0.4\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_modifica_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_new_events.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_notify.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_partecipazione_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_profilo_evento.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_profilo_evento_admin.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_profilo_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_profilo_gruppo_admin.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_profilo_partecipante.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/fragment_rimuovi_partecipazione_evento.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_annulla_partecipazione_evento.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_event.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_gruppo.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_invito.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_partecipanti.xml\" value=\"0.264\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_partecipato_evento.xml\" value=\"0.4\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_promemoria_evento.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/item_richiesta.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/partecipante_row.xml\" value=\"0.21693840579710144\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/layout/user_row.xml\" value=\"0.4\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/menu/bottom_navigation.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/menu/menu.xml\" value=\"0.25416666666666665\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml\" value=\"0.2703125\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher2.xml\" value=\"0.2703125\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher2_round.xml\" value=\"0.2703125\" />\r\n        <entry key=\"..\\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml\" value=\"0.2703125\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_1_8\" default=\"true\" project-jdk-name=\"1.8\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/.idea/misc.xml	(date 1635963694768)
@@ -51,10 +51,11 @@
         <entry key="..\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher2.xml" value="0.2703125" />
         <entry key="..\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher2_round.xml" value="0.2703125" />
         <entry key="..\:/Users/franc/AndroidStudioProjects/ContagiApp/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml" value="0.2703125" />
+        <entry key="..\:/Users/franc/AndroidStudioProjects/Contagiooo/app/src/main/res/layout/fragment_new_events.xml" value="0.209375" />
       </map>
     </option>
   </component>
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_1_8" default="true" project-jdk-name="1.8" project-jdk-type="JavaSDK">
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_11" default="true" project-jdk-name="JDK" project-jdk-type="JavaSDK">
     <output url="file://$PROJECT_DIR$/build/classes" />
   </component>
   <component name="ProjectType">
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"GradleMigrationSettings\" migrationVersion=\"1\" />\r\n  <component name=\"GradleSettings\">\r\n    <option name=\"linkedExternalProjectsSettings\">\r\n      <GradleProjectSettings>\r\n        <option name=\"testRunner\" value=\"PLATFORM\" />\r\n        <option name=\"distributionType\" value=\"DEFAULT_WRAPPED\" />\r\n        <option name=\"externalProjectPath\" value=\"$PROJECT_DIR$\" />\r\n        <option name=\"modules\">\r\n          <set>\r\n            <option value=\"$PROJECT_DIR$\" />\r\n            <option value=\"$PROJECT_DIR$/app\" />\r\n          </set>\r\n        </option>\r\n        <option name=\"resolveModulePerSourceSet\" value=\"false\" />\r\n        <option name=\"useQualifiedModuleNames\" value=\"true\" />\r\n      </GradleProjectSettings>\r\n    </option>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/gradle.xml b/.idea/gradle.xml
--- a/.idea/gradle.xml	(revision 33d7de293dd3a71bc2a72e866e62c625a7161c19)
+++ b/.idea/gradle.xml	(date 1635963694782)
@@ -4,7 +4,7 @@
   <component name="GradleSettings">
     <option name="linkedExternalProjectsSettings">
       <GradleProjectSettings>
-        <option name="testRunner" value="PLATFORM" />
+        <option name="testRunner" value="GRADLE" />
         <option name="distributionType" value="DEFAULT_WRAPPED" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
         <option name="modules">
@@ -13,8 +13,6 @@
             <option value="$PROJECT_DIR$/app" />
           </set>
         </option>
-        <option name="resolveModulePerSourceSet" value="false" />
-        <option name="useQualifiedModuleNames" value="true" />
       </GradleProjectSettings>
     </option>
   </component>
